"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6040],{52477:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>g,contentTitle:()=>c,default:()=>o,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var i=n(74848),t=n(28453);const a={},c=void 0,r={id:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/hw10-impl",title:"hw10-impl",description:"\u8bf7\u4f60\u5728\u5927\u4e8c\u5f00\u53d1\u7684E-Book\u7cfb\u7edf\u7684\u57fa\u7840\u4e0a\uff0c\u5b8c\u6210\u4e0b\u5217\u4efb\u52a1\uff1a",source:"@site/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/10.hw10-impl.md",sourceDirName:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a",slug:"/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/hw10-impl",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/hw10-impl",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"notesSidebar",previous:{title:"hw9-impl",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/hw9-impl"},next:{title:"hw11-impl",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u4f5c\u4e1a/hw11-impl"}},g={},d=[];function h(e){const s={code:"code",img:"img",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"\u8bf7\u4f60\u5728\u5927\u4e8c\u5f00\u53d1\u7684E-Book\u7cfb\u7edf\u7684\u57fa\u7840\u4e0a\uff0c\u5b8c\u6210\u4e0b\u5217\u4efb\u52a1\uff1a"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"A. \u8bf7\u4f60\u5728\u81ea\u5df1\u7684\u673a\u5668\u4e0a\u5b89\u88c5Nginx\uff0c\u5e76\u50cf\u4e0a\u8bfe\u4e3e\u4f8b\u4e00\u6837\u8fd0\u884c\u540c\u4e00\u4e2a\u5e94\u7528\u7684\u4e24\u4e2a\u5b9e\u4f8b\uff0c\u7136\u540e\u8ba9Nginx\u6765\u4f5c\u4e3a\u7f51\u5173\u8f6c\u53d1\u8bf7\u6c42\u3002\u8bf7\u4f60\u5728nginx.conf\u4e2d\u4f9d\u6b21\u8fd0\u884c\u4e09\u79cd\u4e0d\u540c\u7684\u8f6c\u53d1\u7b56\u7565\uff0c\u4ee5\u53ca\u5bf9\u4e24\u4e2a\u5b9e\u4f8b\u914d\u7f6e\u4e0d\u540c\u7684\u6743\u91cd\uff0c\u5c06\u8fd0\u884c\u7ed3\u679c\u622a\u56fe\u8d34\u5728Word\u6587\u6863\u4e2d\uff0c\u5e76\u6839\u636e\u622a\u56fe\u8be6\u7ec6\u53d9\u8ff0\u5404\u79cd\u914d\u7f6e\u4e0b\u8fd0\u884c\u7ed3\u679c\u7684\u5dee\u5f02\uff0c\u5e76\u5206\u6790\u4ea7\u751f\u8fd9\u79cd\u5dee\u5f02\u7684\u539f\u56e0\u3002"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["\u7b54\uff1a\u4e00\u3001\u4f7f\u7528round-robin\u7b56\u7565\n\u4ee5\u4e0b\u662fconfig\u6587\u4ef6\uff1a\n",(0,i.jsx)(s.img,{alt:"10-1",src:n(2142).A+"",width:"935",height:"746"}),"\n\u4ee5\u4e0b\u7684hello\u53ef\u4ee5\u533a\u5206\u4e24\u4e2a\u8fd0\u884c\u57288100\u548c8101\u7aef\u53e3\u7684\u5b9e\u4f8b\uff0cnginx\u4ee3\u7406\u52308180\n",(0,i.jsx)(s.img,{alt:"10-2",src:n(31049).A+"",width:"1036",height:"449"}),"\n\u4ee5\u4e0b\u662f\u8fd0\u884c\u7ed3\u679c\uff1a\n\u7b2c\u4e00\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-3",src:n(59872).A+"",width:"897",height:"192"}),"\n\u7b2c\u4e8c\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-4",src:n(58266).A+"",width:"897",height:"192"}),"\n\u7b2c\u4e09\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-5",src:n(63491).A+"",width:"897",height:"192"}),"\n\u7b2c\u56db\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-6",src:n(26632).A+"",width:"897",height:"192"}),"\nround-robin\u7684\u7b56\u7565\u5c31\u662f\u8f6e\u6d41\u6765\u5904\u7406\uff0c\u6709\u670d\u52a1\u56681\uff0c\u670d\u52a1\u56682\u4f5c\u4e3a\u540e\u7aef\u63a5\u53d7\u8bf7\u6c42\uff0c\u5bf9\u4e8e\u8bf7\u6c42\uff0c\u5c31\u7b2c\u2f00\u6b21\u4ea4\u7ed9server1\uff0c\u7b2c\u2f06\u6b21\u4ea4\u7ed9server2\uff0c\u7b2c\u4e09\u6b21\u4ea4\u7ed9server1\uff0c\u7b2c\u56db\u6b21\u4ea4\u7ed9server2\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\u4e8c\u3001\u4f7f\u7528round-robin\uff0b\u6743\u91cd\u914d\u7f6e\u7b56\u7565\n\u4ee5\u4e0b\u662fconfig\u6587\u4ef6\uff1a\n",(0,i.jsx)(s.img,{alt:"10-7",src:n(66577).A+"",width:"1243",height:"838"}),"\n\u4ee5\u4e0b\u662f\u8fd0\u884c\u7ed3\u679c\uff1a\n\u7b2c\u4e00\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-8",src:n(30462).A+"",width:"539",height:"204"}),"\n\u7b2c\u4e8c\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-9",src:n(1799).A+"",width:"546",height:"165"}),"\n\u7b2c\u4e09\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-10",src:n(33324).A+"",width:"615",height:"140"}),"\n\u7b2c\u56db\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-10",src:n(16213).A+"",width:"615",height:"140"})]}),"\n",(0,i.jsxs)(s.p,{children:["\u8fd9\u6b21\u5728\u914d\u7f6e\u7684\u65f6\u5019 ",(0,i.jsx)(s.code,{children:"server localhost:8100 weight=3;"})," \uff0c\u7ed9\u7b2c\u2f00\u4e2a\u670d\u52a1\u5668\u52a0\u4e0a\u2f00\u4e2a3\u7684\u6743\u91cd\uff0c\u7b2c\u4e8c\u4e2a\u670d\u52a1\u5668\u4e0d\u53d8\uff0c\u4ea4\u7ed9\u670d\u52a1\u56681\u548c\u670d\u52a1\u56682\u7684\u6bd4\u4f8b\u5e94\u8be5\u662f3:1\uff0c\u6240\u4ee5\u5047\u5982\u8fdb\u2f8f\u8bbf\u95ee\uff1a\u7b2c\u2f00\u6b21server1\uff0c\u7b2c\u2f06\u6b21server1\uff0c\u7b2c\u4e09\u6b21server1\uff0c\u7b2c\u56db\u6b21server2\u3002\u4e4b\u540e\u91cd\u590d\u5faa\u73af\uff1a\u7b2c\u4e94\u6b21server1\uff0c\u7b2c\u516d\u6b21server1\uff0c\u7b2c\u4e03\u6b21server1\uff0c\u7b2c\u2f0b\u6b21server2\u3002"]}),"\n",(0,i.jsxs)(s.p,{children:["\u4e09\u3001\u4f7f\u7528least-connected\u7b56\u7565\n\u4ee5\u4e0b\u662fconfig\u6587\u4ef6\uff1a\n",(0,i.jsx)(s.img,{alt:"10-11",src:n(64210).A+"",width:"615",height:"361"}),"\n\u4ee5\u4e0b\u662f\u8fd0\u884c\u7ed3\u679c\uff1a\n\u7b2c\u4e00\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-12",src:n(29563).A+"",width:"591",height:"141"}),"\n\u7b2c\u4e8c\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-13",src:n(81483).A+"",width:"591",height:"141"}),"\n\u7b2c\u4e09\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-14",src:n(90978).A+"",width:"591",height:"141"}),"\n\u7b2c\u56db\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-15",src:n(73913).A+"",width:"591",height:"141"}),"\n\u8fd0\u884c\u7ed3\u679c\u4e0eround robin\u914d\u7f6e\u76f8\u4f3c\uff0c\u5728least_conn\u914d\u7f6e\u4e0b\uff0c\u8bf7\u6c42\u5c06\u88ab\u4f20\u9012\u7ed9\u5f53\u524d\u62e5\u6709\u6700\u5c11\u6d3b\u8dc3\u8fde\u63a5\u7684server\uff0c\u56e0\u6b64\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u9009\u62e9\u4e861\uff0c\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u5230\u6765\u5c31\u4f1a\u9009\u62e9\u5269\u4e0b\u53ef\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u9009\u62e92\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002"]}),"\n",(0,i.jsxs)(s.p,{children:["\u56db\u3001\u4f7f\u7528ip-hash\u7b56\u7565\n\u4ee5\u4e0b\u662fconfig\u6587\u4ef6\uff1a\n",(0,i.jsx)(s.img,{alt:"10-16",src:n(67664).A+"",width:"547",height:"247"}),"\n\u4ee5\u4e0b\u662f\u8fd0\u884c\u7ed3\u679c\uff1a\n\u7b2c\u4e00\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-17",src:n(36687).A+"",width:"591",height:"141"}),"\n\u7b2c\u4e8c\u6b21\u5230\u7b2cn\u6b21\uff1a\n",(0,i.jsx)(s.img,{alt:"10-18",src:n(71494).A+"",width:"591",height:"141"}),"\n\u4f7f\u7528ip hash\u7b56\u7565\u65f6\uff0c\u4f1a\u5229\u7528\u8bbf\u95ee\u7528\u6237\u7684ip\u8ba1\u7b97\u4e00\u4e2aHash\u503c\uff0c\u7136\u540e\u6839\u636eHash\u503c\u786e\u5b9a\u662f\u54ea\u4e2a\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u3002\u7531\u4e8e\u7535\u8111\u7684ip\u6ca1\u53d8\uff0c\u6240\u4ee5\u4e00\u76f4\u8bbf\u95ee\u7684\u90fd\u662f\u670d\u52a1\u56681\uff0c\u6240\u4ee5session\u4e0d\u53d8\u3002"]}),"\n",(0,i.jsx)(s.p,{children:"B. \u8bf7\u4f60\u4f7f\u7528GraphQL\u5728\u4f60\u7684\u7535\u5b50\u4e66\u5e97\u4e2d\u5b9e\u73b0\u6309\u7167\u4e66\u7c4d\u540d\u79f0\u6765\u67e5\u627e\u4e66\u7c4d\u7684\u529f\u80fd\uff0c\u9700\u6ce8\u610f\u4ee5\u4e0b\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"i. \u540e\u53f0\u5b9e\u73b0\u5728\u6570\u636e\u5e93\u4e2d\u8fdb\u884c\u6570\u636e\u67e5\u627e\u7684DAO\u3001Service\u3001Repository\u3001Entity\u5c42\u7684\u4ee3\u7801\u5e94\u8be5\u590d\u7528\u4f60\u73b0\u6709\u7684\u4ee3\u7801\u3002"}),"\n",(0,i.jsx)(s.li,{children:"ii. \u524d\u7aef\u53d1\u9001\u7684GraphQL\u8bf7\u6c42\u5e94\u8be5\u4f7f\u7528\u53d8\u91cf\uff0c\u4ee5\u590d\u7528\u67e5\u8be2\u8bed\u53e5\u3002"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["\u7b54\uff1a\n\u540e\u7aef\u5b9e\u73b0\uff1a\nController\u5c42\uff08GraphqlController\uff09\uff1a\u5176\u4f59\u5c42\u90fd\u590d\u7528\u73b0\u6709\u7684\u4ee3\u7801\n",(0,i.jsx)(s.img,{alt:"10-19",src:n(52701).A+"",width:"1604",height:"1014"})]}),"\n",(0,i.jsxs)(s.p,{children:["schema.graphqls\u6587\u4ef6\uff1a\n",(0,i.jsx)(s.img,{alt:"10-20",src:n(31572).A+"",width:"1498",height:"1081"}),"\n\u524d\u7aef\u5b9e\u73b0\uff1a\n\u4fee\u6539\u4e86react query\u4e4b\u4e2d\u7684fetchBooks\u51fd\u6570\n",(0,i.jsx)(s.img,{alt:"10-21",src:n(57491).A+"",width:"1681",height:"1167"}),"\n\u8fd0\u884c\u622a\u56fe\uff1a\n\u5728\u641c\u7d22\u680f\u641c\u7d22Great\uff1a\n",(0,i.jsx)(s.img,{alt:"10-22",src:n(41930).A+"",width:"1165",height:"1103"})]})]})}function o(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},58266:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-10-fc569bfbcebdb6741b3f4174fc9a1233.png"},63491:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-11-cf29bc2c699e29b8a998cbe8cf67527b.png"},26632:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-12-c8905088f6ad5c0627b5590e55d8a233.png"},66577:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-13-fa8c0d9693c07767c3c1a56c9ffdc25c.png"},30462:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-14-ccd1bf896dc8fc613c126fb95f5a14f0.png"},1799:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-15-02894858ae0e87a673994f768a019cba.png"},33324:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-16-6cf5e68a26ca9cd04a57cbb09fe85de6.png"},16213:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-17-153ca8331f4f29974229de2b5bf65868.png"},64210:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-18-ae174e0efce33e0a9d3bd50847337eb9.png"},29563:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-19-a6b3b5eda6c784321231feb7a168ad57.png"},81483:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-20-b5499b4338f763f0f59f97497c15a7ca.png"},90978:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-21-a6b3b5eda6c784321231feb7a168ad57.png"},73913:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-22-b5499b4338f763f0f59f97497c15a7ca.png"},67664:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-23-a181034b2fade9410c62e152140a256e.png"},36687:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-24-bf8aa82e6213a51baba1da01b9236556.png"},71494:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-25-bf8aa82e6213a51baba1da01b9236556.png"},52701:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-26-8072a7bdb19e218adc983e06eab897b9.png"},31572:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-27-5906767a19c52c18b994fa289aa7ffa1.png"},57491:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-28-c7d84d19186937051f615d107dac1e54.png"},41930:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-29-72f52772a5ac0a109cd7ef1dd2b1967c.png"},2142:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-7-56d0bf0071260e70f303ce3c694563a8.png"},31049:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-8-55e29679e99843eb0832fbf1a4c23c6f.png"},59872:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/image-9-cf29bc2c699e29b8a998cbe8cf67527b.png"},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>r});var i=n(96540);const t={},a=i.createContext(t);function c(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);