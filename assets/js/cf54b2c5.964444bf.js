"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8615],{93834:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>x,frontMatter:()=>r,metadata:()=>c,toc:()=>t});var s=i(74848),o=i(28453);const r={},l=void 0,c={id:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-KV-mongoDB",title:"NoSQL-KV-mongoDB",description:"NoSQL",source:"@site/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/15.NoSQL-KV-mongoDB.md",sourceDirName:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0",slug:"/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-KV-mongoDB",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-KV-mongoDB",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:15,frontMatter:{},sidebar:"notesSidebar",previous:{title:"mysql\u5206\u533a",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/mysql\u5206\u533a"},next:{title:"NoSQL-Graph-Neo4j",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-Graph-Neo4j"}},d={},t=[{value:"NoSQL",id:"nosql",level:2},{value:"mongodb",id:"mongodb",level:3}];function h(n){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"nosql",children:"NoSQL"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"KV"}),"\n",(0,s.jsx)(e.li,{children:"Document"}),"\n",(0,s.jsx)(e.li,{children:"Neo4J \u56fe\u6570\u636e\u5e93"}),"\n",(0,s.jsx)(e.li,{children:"VectorDB & Log Structure"}),"\n",(0,s.jsx)(e.li,{children:"TSDB"}),"\n",(0,s.jsx)(e.li,{children:"\u4e91\u6570\u636e\u5e93"}),"\n",(0,s.jsx)(e.li,{children:"..."}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"rdbms:\u8d85\u8fc71kw\u884c\u6570\u636e(index \u4e3b\u952eid+\u6307\u9488 = 8 + 6\u81f3\u5c1114\u5b57\u8282, innodb\u4e2d\u6587\u4ef6\u5757\u662f16KB\u7c92\u5ea6,\u5927\u7ea61000\u4e2aitem, kw\u91cf\u7ea7\u65f6\u5dee\u4e0d\u591a\u662findex\u4ece3\u5c42\u9000\u5316\u5230\u56db\u5c42\u7684\u65f6\u5019), \u6162"}),"\n",(0,s.jsx)(e.p,{children:"\u975e\u7ed3\u6784\u5316\u6570\u636e"}),"\n",(0,s.jsxs)(e.p,{children:["nosql\u5bf9\u4e8e ",(0,s.jsx)(e.strong,{children:"\u5927\u6570\u636e/\u6279\u5904\u7406\u652f\u6301\u66f4\u4f18"}),"\n\u4e14\u591a\u6570\u5177\u5907 \u4e00\u6b21\u5199\u5165\u591a\u6b21\u8bfb\u53d6\u7684\u7279\u70b9\uff0c",(0,s.jsx)(e.strong,{children:"\u8bfb\u591a\u4e8e\u5199\uff0c\u56e0\u800c\u5bf9\u4e8b\u52a1\u548c\u9501\u8981\u6c42\u53d8\u5f31"})]}),"\n",(0,s.jsx)(e.p,{children:"BigTable column family"}),"\n",(0,s.jsx)(e.p,{children:"cell \u5b58\u591a\u4e2a\u7248\u672c"}),"\n",(0,s.jsx)(e.p,{children:"nosql db:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"dynamo"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"couchDB"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"mongoDB"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"..."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"mongodb",children:"mongodb"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"document-oriented storage"}),"\n",(0,s.jsx)(e.li,{children:"full index support"}),"\n",(0,s.jsx)(e.li,{children:"replication & high availiability"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"auto sharding"})," \u81ea\u52a8\u5206\u7247"]}),"\n",(0,s.jsx)(e.li,{children:"querying"}),"\n",(0,s.jsx)(e.li,{children:"fast in-place update"}),"\n",(0,s.jsx)(e.li,{children:"map/reduce"}),"\n",(0,s.jsx)(e.li,{children:"gridfs"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u5e94\u7406\u89e3:"}),"\n",(0,s.jsx)(e.p,{children:'"\u8868" - collection'}),"\n",(0,s.jsx)(e.p,{children:'"\u884c" - document'}),"\n",(0,s.jsx)(e.p,{children:"mysql partition \u6c34\u5e73\u5207\u5272"}),"\n",(0,s.jsx)(e.p,{children:"mongo\u53ef\u4ee5\u505a\u5782\u76f4\u5207\u5272 -> \u653e\u5f03\u5173\u8054\u6027, \u624b\u52a8\u7ef4\u62a4, \u5782\u76f4\u7684\u6210\u4e3a\u72ec\u7acb\u7684collection"}),"\n",(0,s.jsx)(e.p,{children:"mongodb\u81ea\u52a8\u6709\u4e09\u4e2acollection: admin, local\u548cconfig"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["\u9ed8\u8ba4\u7684sharding\u673a\u5236\u662f\u6309\u7167",(0,s.jsx)(e.code,{children:"_id"}),"\u6765\u505a\u7684"]})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u67e5\u8be2\u65f6\u8d1f\u8f7d\u5747\u8861\u548c\u5206\u533a\u65f6\u7684\u4f9d\u636e:\u5148\u7531config\u8868\u786e\u8ba4\u5728\u54ea\u4e2aserver,\u518d\u53bbserver\u67e5\u8be2"})}),"\n",(0,s.jsx)(e.p,{children:"\u53ef\u4ee5\u4fee\u6539schema, schema free\u7684, \u4ec5\u7528\u4e8e\u805a\u5408aggregation"}),"\n",(0,s.jsx)(e.p,{children:"\u7ec4\u5408mongo\u548cmysql, \u4ee5person\u5bf9\u8c61\u7684icon\u5b57\u6bb5\u4e3a\u4f8b"}),"\n",(0,s.jsx)(e.p,{children:"person icon \u5b58mongo"}),"\n",(0,s.jsxs)(e.p,{children:["\u5728person\u4e0aicon\u5b57\u6bb5\u52a0\u4e0a ",(0,s.jsx)(e.code,{children:"@transient"}),"\u8868\u793aJPA\u4e0d\u7ba1\u8fd9\u4e2a"]}),"\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u5728service\u91cc\u9762\u7ec4\u5408mongo\u67e5\u51fa\u6765\u7684\u503c\u548cmysql\u67e5\u51fa\u6765\u7684\u503c"}),"\n",(0,s.jsx)(e.p,{children:"mongo auto-shard\u539f\u7406, \u5355\u673a client - mongod"}),"\n",(0,s.jsx)(e.p,{children:"\u96c6\u7fa4 client - mongos - mongod, client\u548c\u5185\u7f6erouter\u7684mongos \u901a\u4fe1"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u89e6\u53d1\u81ea\u52a8\u5206\u7247\u7684\u6761\u4ef6: 1. \u624b\u52a8\u914d\u7f6e\u6761\u4ef6 2.\u672c\u673a\u786c\u76d8\u4e0d\u591f 3.\u672c\u673afd\u4e0d\u591f 4.\u672c\u673a\u5185\u5b58\u4e0d\u591f ..."})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.strong,{children:["mongo\u5206\u533a\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u662fchunk, chunk\u5c31\u662f\u4e00\u6bb5",(0,s.jsx)(e.code,{children:"_id"}),"\u7684key range, \u6700\u5927\u5927\u5c0f\u53ef\u4ee5\u914d\u7f6e"]})}),"\n",(0,s.jsxs)(e.p,{children:["mongo\u81ea\u52a8\u5206\u533a\u4f1a\u8fc1\u79fb\u8fd9\u4e9bchunk\u4f7f\u5f97\u96c6\u7fa4\u4e4b\u4e2d\u7684\u5404\u53f0\u673a\u5668\u4e0a\u8fbe\u5230\u4e00\u4e2a\u76f8\u5bf9\u7684\u6570\u91cf\u5e73\u8861\uff08",(0,s.jsx)(e.strong,{children:"\u5b58\u50a8\u8d1f\u8f7d\u5747\u8861, \u800c\u4e0d\u662f\u8bbf\u95ee\u8d1f\u8f7d\u5747\u8861,"})," \u8bbf\u95ee\u8d1f\u8f7d\u53ef\u4ee5\u81ea\u5df1\u5916\u6302\u811a\u672c\uff09"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5f53\u4e00\u4e2achunk\u592a\u5927\u65f6, \u5c31\u4f1a\u89e6\u53d1chunk\u5206\u88c2, \u8fdb\u800c\u53ef\u80fd\u89e6\u53d1chunk\u5728\u4e0d\u540c\u673a\u5668\u4e0a\u7684\u8fc1\u79fb"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6bcf\u4e2a\u533a\u57df\u90fd\u53ef\u4ee5\u6709\u4e3b\u4ece, \u4e3b\u6570\u636e\u5e93\u7ef4\u6301\u4e00\u4e2aconfig, \u8bb0\u5f55key - chunk - shard \u76f4\u63a5\u7684\u5173\u7cfb, client\u5bf9\u6b64\u662f\u65e0\u611f\u77e5\u7684"})})]})}function x(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>c});var s=i(96540);const o={},r=s.createContext(o);function l(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:l(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);