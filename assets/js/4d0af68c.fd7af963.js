"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7153],{60574:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var r=s(74848),i=s(28453);const o={},t=void 0,l={id:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-Graph-Neo4j",title:"NoSQL-Graph-Neo4j",description:"Neo4j",source:"@site/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/16.NoSQL-Graph-Neo4j.md",sourceDirName:"\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0",slug:"/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-Graph-Neo4j",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-Graph-Neo4j",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:16,frontMatter:{},sidebar:"notesSidebar",previous:{title:"NoSQL-KV-mongoDB",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-KV-mongoDB"},next:{title:"NoSQL-LSDB,VecDB,TSDB-rocksdb,influx",permalink:"/docs/\u5e94\u7528\u7cfb\u7edf\u4f53\u7cfb\u67b6\u6784/\u590d\u4e60\u7b14\u8bb0/NoSQL-LSDB,VecDB,TSDB-rocksdb,influx"}},c={},d=[{value:"Neo4j",id:"neo4j",level:3}];function p(n){const e={blockquote:"blockquote",code:"code",em:"em",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h3,{id:"neo4j",children:"Neo4j"}),"\n",(0,r.jsx)(e.p,{children:"\u4e5f\u652f\u6301OLTP\u4e4b\u7c7b\u7684\u5e94\u7528, \u4f46\u5bf9\u56fe\u8868\u793a\u65b9\u5f0f\u8fdb\u884c\u4e86\u7279\u6b8a\u7684\u4f18\u5316"}),"\n",(0,r.jsx)(e.p,{children:"dbms: \u4e00\u822c\u90fd\u6709\u4e24\u5c42: \u4e00\u662fprocess engine, \u751f\u6210\u67e5\u8be2\u8ba1\u5212; \u4e8c\u662fstorage engine, \u6267\u884c\u6587\u4ef6\u8bfb\u5199"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u4e3a\u4ec0\u4e48\u9700\u8981\u56fe\u6570\u636e\u5e93: relational db lack relational support"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6b63\u5411\u67e5\u8be2\u9700\u8981\u591a\u6b21join, \u4e14\u53cd\u5411\u8ffd\u6eaf\u53ef\u80fd\u66f4\u96be\u505a"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e3e\u4f8b: \u4e24\u5f20\u8868 person \u548c friendship"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"person: | id | person\nfriendship: | id | person_id | friend_id\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u9700\u8981\u627eA\u7684\u6240\u6709\u670b\u53cb"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:'select p1.person from \n\tperson p1 join friendship on p1.id = friendship.person_id\n\tjoin person p2 on p2.id = frienship.friend_id\nwhere p2.person="A"\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u9700\u8981\u4e24\u6b21join"}),"\n",(0,r.jsx)(e.p,{children:"\u627e\u6240\u6709\u548cA\u662f\u670b\u53cb\u7684\u4eba(\u5047\u8bbe\u670b\u53cb\u5173\u7cfb\u662f\u5355\u5411\u7684,\u6216\u8005\u6539\u6210A\u7684\u5173\u6ce8\u548c\u5173\u6ce8A\u7684\u4eba), \u8fd8\u662f\u4e24\u6b21join, \u5e76\u4e14\u5982\u679c\u8868\u518d\u591a\u8d77\u6765, \u53cd\u5411\u5bb9\u6613\u5148join\u5927\u8868\u8fbe\u6210\u590d\u6742\u5ea6\u7206\u70b8"}),"\n",(0,r.jsx)(e.p,{children:"\u5176\u4ed6\u66f4\u590d\u6742\u7684\u9700\u6c42 \u597d\u53cb\u7684\u597d\u53cb \u7b49, join\u6b21\u6570\u8fd8\u8981\u589e\u52a0, \u6700\u540e\u4e0d\u53ef\u5fcd\u53d7"}),"\n",(0,r.jsx)(e.p,{children:"\u4f8b\u5982 \u4e00\u4e2a\u4eba\u4e70\u8fc7\u54ea\u4e9b\u4e1c\u897f, 4\u8868join user, order, orderItem, product"}),"\n",(0,r.jsx)(e.p,{children:"mongo\u5462\uff1f\u5982\u679c\u662f\u5d4c\u5957\u8868\u793a, \u6b63\u5411\u662fok\u7684, \u5d4c\u5957\u6253\u5f00; \u4f46\u53cd\u5411\u5c31\u5bc4\u4e86, \u7b49\u540c\u4e8ejson\u7684\u6570\u7ec4\u91cc\u9762\u4ee5\u4e00\u4e2a\u5d4c\u5957\u7684\u5f88\u6df1attribute\u505afilter, \u53ea\u80fd\u505a\u5168\u8868\u626b\u63cf, \u5e76\u4e14\u7a7a\u95f4\u4e0a\u4e5f\u6709\u95ee\u9898; \u5982\u679c\u662f\u5f15\u7528\u8868\u793a, \u548crdbms\u5c31\u5dee\u4e0d\u591a\u4e86"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u56fedb:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8fb9\u5c31\u662f\u201c\u7d22\u5f15\u201d, \u5e76\u4e0d\u9700\u8981\u5168\u8868\u626b\u63cf, \u6309\u8fb9\u4e00\u76f4\u8d70\u5c31\u884c"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u81ea\u7136\u7684\u8868\u8fbe\u591a\u79cd\u5173\u7cfb, \u4e0d\u9700\u8981\u4e3a\u6bcf\u4e00\u79cd\u5173\u7cfb\u5f00\u4e00\u4e2a\u8868, \u53ef\u4ee5\u65b9\u4fbf\u5730\u505a\u591a\u5173\u7cfb\u8054\u67e5"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u4fbf\u505a\u53cd\u5411\u67e5\u8be2, \u6b63\u5411\u662f\u5bf9\u7ed3\u70b9\u7684\u6240\u6709\u51fa\u8fb9\u5f15\u7528, \u53cd\u5411\u5c31\u662f\u6240\u6709\u5165\u8fb9"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"querying in graph: cypher"}),"\n",(0,r.jsx)(e.p,{children:"\u4ee5\u673a\u623f,\u673a\u67b6\u7269\u7406\u673a,server, app,db, load balancer\u8fd9\u51e0\u4e2a\u6982\u5ff5\u4e3a\u4f8b"}),"\n",(0,r.jsx)(e.p,{children:"sql\u6a21\u578b"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://s2.loli.net/2024/11/24/vWEzbIsAKLxjtVZ.png",alt:"image-20241124161857070"})}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679c\u8981\u627e\u201c\u8fd9\u4e2auser\u4f7f\u7528\u54ea\u4e2aload balancer\u201d\u9700\u89815\u6b21join"}),"\n",(0,r.jsx)(e.p,{children:"\u4f46\u662f\u56fe\u7684\u6a21\u578b\u7c7b\u4f3c\u4e0b\u56fe"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://s2.loli.net/2024/11/24/m6ExjIUQodikGgO.png",alt:"image-20241124162000069"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Test Graph Model"}),"\nWhen a user reports a problem, we can limit the physical fault-finding to problematic network elements between the user and the application and the application and its dependencies."]}),"\n",(0,r.jsx)(e.p,{children:"In our graph we can find the faulty equipment with the following query:"}),"\n",(0,r.jsxs)(e.p,{children:["*",(0,r.jsxs)(e.em,{children:["MATCH (user",":User",")-[",(0,r.jsxs)(e.em,{children:["1..5]-(asset",":Asset",")"]})]}),"\n",(0,r.jsx)(e.strong,{children:"WHERE user.name = 'User 3' AND asset.status = 'down' RETURN DISTINCT asset"})]}),"\n",(0,r.jsx)(e.p,{children:"This allows us to match paths such as:"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cypher",children:"> (user)-[:USER_OF]->(app)\n> (user)-[:USER_OF]->(app)-[:USES]->(database) \n> (user)-[:USER_OF]->(app)-[:USES]->(database)-[:SLAVE_OF]->(another-database) \n> (user)-[:USER_OF]->(app)-[:RUNS_ON]->(vm) \n> (user)-[:USER_OF]->(app)-[:RUNS_ON]->(vm)-[:HOSTED_BY]->(server) \n> (user)-[:USER_OF]->(app)-[:RUNS_ON]->(vm)-[:HOSTED_BY]->(server)-[:IN]->(rack) \n> (user)-[:USER_OF]->(app)-[:RUNS_ON]->(vm)-[:HOSTED_BY]->(server)-[:IN]->(rack) <-[:IN]-(load-balancer)\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://s2.loli.net/2024/11/24/CKHvahqQOi7XpzG.png",alt:"image-20241124162319655"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"neo4j"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u53ef\u4ee5\u4ee5\u5355\u72ec\u7684\u670d\u52a1\u8dd1"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u53ef\u4ee5\u5d4c\u5165\u5f0f, \u5305\u8fdbspring\u8fdb\u7a0b"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u53ef\u4ee5\u96c6\u7fa4, \u8fdb\u884c\u56fe\u7684\u5206\u5272\u5b58\u50a8"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u600e\u4e48\u5b58\u8fd9\u79cd\u9ad8\u5ea6\u53d8\u957f\u7684\u4e1c\u897f\u7684\uff1f\u53cc\u5411\u94fe\u8868"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8282\u70b9\u7684\u5c5e\u6027\u548c\u8fb9\u90fd\u662f\u4e00\u4e2a\u94fe\u8868\uff0c\u8282\u70b9\u81ea\u5df1\u53ea\u5b58\u94fe\u8868\u5165\u53e3\u548c\u8fb9\u5165\u53e3"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8fb9\u5b58: src, dst;src\u8282\u70b9\u7684\u524d\u4e00\u6761\u8fb9,\u540e\u4e00\u6761\u8fb9; dst\u8282\u70b9\u7684\u524d\u4e00\u6761\u8fb9,\u540e\u4e00\u6761\u8fb9"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://s2.loli.net/2024/11/24/waXxsudAbnzOC18.png",alt:"image-20241124170029827"})}),"\n",(0,r.jsx)(e.p,{children:"Neo4j in java, spring data\u6574\u5408, api\u7c7b\u4f3csql"}),"\n",(0,r.jsx)(e.p,{children:"\u56fe\u8ba1\u7b97"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://s2.loli.net/2024/11/24/ikoAm53qKN1W68r.png",alt:"image-20241124170446219"})})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>l});var r=s(96540);const i={},o=r.createContext(i);function t(n){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);