"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6773],{73015:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>t,frontMatter:()=>r,metadata:()=>d,toc:()=>x});var s=l(74848),i=l(28453);const r={title:"system-design-interview\u7b14\u8bb0",author:"ayanami",tags:["\u67b6\u6784\u8bbe\u8ba1"],keywords:["\u7cfb\u7edf\u67b6\u6784","\u67b6\u6784\u8bbe\u8ba1"]},c=void 0,d={permalink:"/blog/\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u7b14\u8bb0",source:"@site/blog/\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u7b14\u8bb0.md",title:"system-design-interview\u7b14\u8bb0",description:"\u9650\u6d41\u5668",date:"2025-02-12T13:56:21.000Z",tags:[{inline:!0,label:"\u67b6\u6784\u8bbe\u8ba1",permalink:"/blog/tags/\u67b6\u6784\u8bbe\u8ba1"}],readingTime:26.61,hasTruncateMarker:!1,authors:[{name:"ayanami"}],frontMatter:{title:"system-design-interview\u7b14\u8bb0",author:"ayanami",tags:["\u67b6\u6784\u8bbe\u8ba1"],keywords:["\u7cfb\u7edf\u67b6\u6784","\u67b6\u6784\u8bbe\u8ba1"]},unlisted:!1,prevItem:{title:"ostep\u9605\u8bfb\u7b14\u8bb0\uff1a\u5355\u673afs\u7684\u5d29\u6e83\u4e00\u81f4\u6027(chapter42-44)",permalink:"/blog/ostep-chapter42-44"},nextItem:{title:"JUC",permalink:"/blog/JUC"}},h={authorsImageUrls:[void 0]},x=[{value:"\u9650\u6d41\u5668",id:"\u9650\u6d41\u5668",level:3},{value:"\u4e00\u81f4\u6027hash",id:"\u4e00\u81f4\u6027hash",level:3},{value:"\u4e00\u81f4\u6027\u6a21\u578b",id:"\u4e00\u81f4\u6027\u6a21\u578b",level:3},{value:"\u552f\u4e00ID\u751f\u6210\u5668",id:"\u552f\u4e00id\u751f\u6210\u5668",level:3},{value:"\u77edURL",id:"\u77edurl",level:3},{value:"\u722c\u866b\u7cfb\u7edf",id:"\u722c\u866b\u7cfb\u7edf",level:3},{value:"\u901a\u77e5\u7cfb\u7edf",id:"\u901a\u77e5\u7cfb\u7edf",level:3},{value:"\u804a\u5929\u7cfb\u7edf",id:"\u804a\u5929\u7cfb\u7edf",level:3},{value:"\u7b80\u5355\u7684\u641c\u7d22\u652f\u6301: trie",id:"\u7b80\u5355\u7684\u641c\u7d22\u652f\u6301-trie",level:3},{value:"\u4e34\u8fd1\u670d\u52a1",id:"\u4e34\u8fd1\u670d\u52a1",level:3}];function j(n){const e={a:"a",blockquote:"blockquote",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:"\u9650\u6d41\u5668",children:"\u9650\u6d41\u5668"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u653e\u5728\u54ea\u91cc?"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5ba2\u6237\u7aef, \u5bb9\u6613\u88ab\u4f2a\u9020\u7ed5\u8fc7"}),"\n",(0,s.jsx)(e.li,{children:"\u670d\u52a1\u7aef\u5e94\u7528\u4ee3\u7801, \u7075\u6d3b\u6027\u9ad8, \u4f46\u5360\u636e\u5de5\u7a0b\u8d44\u6e90"}),"\n",(0,s.jsx)(e.li,{children:"\u4e91\u4e0a\u5fae\u670d\u52a1, api\u7f51\u5173\u7b49, \u7075\u6d3b\u6027\u4f4e"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u7ecf\u5178\u7b97\u6cd5:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u4ee4\u724c\u6876: \u56fa\u5b9a\u901f\u7387\u4ea7\u751f\u4ee4\u724c, \u6bcf\u4e2a\u8bf7\u6c42\u6d88\u8017\u4ee4\u724c"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"pros: \u5bb9\u6613\u5b9e\u73b0, \u5185\u5b58\u5360\u7528\u5c11, \u5141\u8bb8\u7a81\u53d1\u6d41\u91cf"}),"\n",(0,s.jsx)(e.li,{children:"cons: \u8c03\u53c2\u56f0\u96be, \u53ef\u80fd\u9700\u8981\u4e0d\u65ad\u586b\u5145\u6876"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6f0f\u6876: \u8bf7\u6c42\u8fdb\u5165\u4e00\u4e2a\u5b9a\u957fFIFO\u961f\u5217, server\u7ed9\u5b9a\u901f\u5ea6\u4ece\u961f\u5217\u53d6\u6570\u636e\u5904\u7406"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"pros: \u5bb9\u6613\u5b9e\u73b0, \u5185\u5b58\u5360\u7528\u5c11, \u8bf7\u6c42\u4ee5\u56fa\u5b9a\u901f\u7387\u5904\u7406"}),"\n",(0,s.jsx)(e.li,{children:"cons: \u7a81\u53d1\u8bf7\u6c42\u5360\u636e\u961f\u5217\u4f7f\u5f97\u65b0\u8bf7\u6c42\u5f97\u4e0d\u5230\u5904\u7406, \u8c03\u53c2\u56f0\u96be,\u53ef\u80fd\u9700\u8981\u4e0d\u65ad\u586b\u5145\u6876"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u56fa\u5b9a\u7a97\u53e3\u8ba1\u6570\u5668: \u6bcf\u4e00\u4e2a\u7ed9\u5b9a\u65f6\u95f4\u7a97\u53e3\u8fdb\u884c\u8ba1\u6570,\u4f8b\u5982\u6bcf\u5206\u949f100\u4e2a\u8bf7\u6c42"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"pros: \u5bb9\u6613\u5b9e\u73b0, \u5185\u5b58\u5360\u7528\u5c11"}),"\n",(0,s.jsx)(e.li,{children:"cons: \u7a81\u53d1\u8bf7\u6c42\u53ef\u4ee5\u8fbe\u5230\u4e24\u500d\u9650\u5236\u7684QPS(\u5728\u7a97\u53e3\u8fb9\u7f18\u6709\u7a81\u523a)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6ed1\u52a8\u7a97\u53e3\u65e5\u5fd7: \u8bb0\u5f55\u8bf7\u6c42\u65f6\u95f4\u6233, \u6570\u636e\u4fdd\u5b58\u5728redis\u7b49\u7f13\u5b58,\u6bcf\u5f53\u65b0\u8bf7\u6c42\u8fdb\u6765\u7684\u65f6\u5019\u628a\u8fc7\u65f6\u65f6\u95f4\u6233\u5220\u9664, \u5982\u679c\u8bf7\u6c42\u65f6\u95f4\u6233\u6bd4\u65f6\u95f4\u7a97\u53e3\u7684\u6700\u4f4e\u503c\u8fd8\u4f4e, \u62d2\u7edd\u8bf7\u6c42"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"pros: \u901f\u7387\u9650\u5236\u51c6\u786e"}),"\n",(0,s.jsx)(e.li,{children:"cons: \u5185\u5b58\u5f00\u9500\u5927, \u9700\u8981\u5b58\u50a8\u591a\u4e2a\u65f6\u95f4\u6233"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6ed1\u52a8\u7a97\u53e3\u8ba1\u6570\u5668: \u67d0\u65f6\u523b\u9650\u5236\u8bf7\u6c42\u6570 = \u7a97\u53e3\u4e0a\u9650 - \u4e0a\u4e00\u4e2a\u7a97\u53e3\u8bf7\u6c42\u6570 * \u8fd9\u4e00\u4e2a\u7a97\u53e3\u7684\u548c\u4e0a\u4e00\u4e2a\u7a97\u53e3\u7684\u91cd\u53e0\u767e\u5206\u6bd4\u3002\u4f8b\u5982, \u7a97\u53e3\u4e3a\u6bcf\u5206\u949f1000, \u4e0a\u4e00\u5206\u949f800, \u5728\u8fd9\u4e00\u5206\u949f\u768430\u79d2\u65f6, \u9650\u5236\u8fd9\u4e00\u5206\u949f\u7a97\u53e3\u7684\u8bf7\u6c42\u6570\u6700\u591a\u4e3a 1000 - 30 / 60 * 800 = 600"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u76f8\u5f53\u4e8e\u5047\u8bbe\u4e0a\u4e00\u4e2a\u7a97\u53e3\u7684\u5e73\u5747\u901f\u7387"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"pros: \u5e73\u6ed1\u4e86\u6d41\u91cf\u5cf0\u503c, \u5185\u5b58\u9ad8\u6548(\u53ea\u9700\u8981\u8ba1\u6570)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"cons: \u4e0d\u592a\u4e25\u683c, \u7136\u800c\u5176\u5b9e\u53ef\u4ee5"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u7136\u800c\uff0c\u8fd9\u4e2a\u95ee\u9898\u53ef\u80fd\u5e76\u4e0d\u50cf\u5b83\u770b\u8d77\u6765\u90a3\u4e48\u7cdf\u7cd5\u3002 \u6839\u636eCloudflare[10]\u6240\u505a\u7684\u5b9e\u9a8c\uff0c\u57284\u4ebf\u4e2a\u8bf7\u6c42\u4e2d\uff0c\u53ea\u67090.003%\u7684\u8bf7\u6c42\u88ab\u9519\u8bef\u5730\u5141\u8bb8\u6216\u9650\u5236\u901f\u7387"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8d85\u8fc7\u901f\u7387\u9650\u5236"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u4e00\u4e2a\u8bf7\u6c42\u88ab\u9650\u5236\u4e86\u901f\u7387\uff0cAPI\u4f1a\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4e00\u4e2aHTTP\u54cd\u5e94\u4ee3\u7801429\uff08\u8bf7\u6c42\u592a\u591a\uff09\u3002\u6839\u636e\u4e0d\u540c\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u5c06\u901f\u7387\u53d7\u9650\u7684\u8bf7\u6c42\u6392\u961f\u7b49\u5019\u4ee5\u540e\u5904\u7406\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e9b\u8ba2\u5355\u7531\u4e8e\u7cfb\u7edf\u8fc7\u8f7d\u800c\u53d7\u5230\u901f\u7387\u9650\u5236\uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u7559\u8fd9\u4e9b\u8ba2\u5355\u4ee5\u4fbf\u4ee5\u540e\u5904\u7406\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u9650\u6d41\u5668\u8bf7\u6c42\u5934"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u4e2a\u5ba2\u6237\u5982\u4f55\u77e5\u9053\u5b83\u662f\u5426\u88ab\u8282\u6d41\uff1f\u5ba2\u6237\u7aef\u5982\u4f55\u77e5\u9053\u5728\u88ab\u8282\u6d41\u4e4b\u524d\u5141\u8bb8\u7684\u5269\u4f59\u8bf7\u6c42\u7684\u6570\u91cf\uff1f\u7b54\u6848\u5c31\u5728HTTP\u54cd\u5e94\u5934\u4e2d\u3002\u9650\u6d41\u5668\u5411\u5ba2\u6237\u7aef\u8fd4\u56de\u4ee5\u4e0b HTTP \u6807\u5934\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"X-Ratelimit-Remaining\uff1a\u7a97\u53e3\u5185\u5141\u8bb8\u8bf7\u6c42\u7684\u5269\u4f59\u6570\u91cf"}),"\n",(0,s.jsx)(e.li,{children:"X-Ratelimit-limit\uff1a\u5b83\u8868\u793a\u5ba2\u6237\u7aef\u5728\u6bcf\u4e2a\u65f6\u95f4\u7a97\u53e3\u53ef\u4ee5\u8fdb\u884c\u591a\u5c11\u6b21\u8c03\u7528"}),"\n",(0,s.jsx)(e.li,{children:"X-Ratelimit-Retry-After\uff1a\u7b49\u5f85\u7684\u79d2\u6570\uff0c\u76f4\u5230\u4f60\u53ef\u4ee5\u518d\u6b21\u63d0\u51fa\u8bf7\u6c42\u800c\u4e0d\u88ab\u8282\u6d41\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u7528\u6237\u53d1\u9001\u8fc7\u591a\u8bf7\u6c42\u65f6\uff0c\u5c06\u5411\u5ba2\u6237\u7aef\u8fd4\u56de 429 too many requests \u9519\u8bef\u548c X-Ratelimit-Retry-After \u6807\u5934\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u89c4\u5219\u88ab\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002\u5de5\u4f5c\u8005\u7ecf\u5e38\u4ece\u78c1\u76d8\u4e2d\u63d0\u53d6\u89c4\u5219\uff0c\u5e76\u5c06\u5176\u5b58\u50a8\u5728\u9ad8\u901f\u7f13\u5b58\u4e2d\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5f53\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u65f6\uff0c\u8be5\u8bf7\u6c42\u9996\u5148\u88ab\u53d1\u9001\u5230\u9650\u6d41\u4e2d\u95f4\u4ef6\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u9650\u6d41\u4e2d\u95f4\u4ef6\u4ece\u7f13\u5b58\u4e2d\u52a0\u8f7d\u89c4\u5219\u3002\u5b83\u4eceRedis\u7f13\u5b58\u4e2d\u83b7\u53d6\u8ba1\u6570\u5668\u548c\u6700\u540e\u4e00\u6b21\u8bf7\u6c42\u7684\u65f6\u95f4\u6233\u3002\u6839\u636e\u54cd\u5e94\uff0c\u9650\u6d41\u5668\u51b3\u5b9a\uff1a","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u8bf7\u6c42\u6ca1\u6709\u901f\u7387\u9650\u5236\uff0c\u5b83\u5c06\u88ab\u8f6c\u53d1\u5230API\u670d\u52a1\u5668\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u8bf7\u6c42\u53d7\u5230\u901f\u7387\u9650\u5236\uff0c\u9650\u6d41\u5668\u4f1a\u5411\u5ba2\u6237\u7aef\u8fd4\u56de 429 too many requests \u9519\u8bef\u3002 \u540c\u65f6\uff0c\u8bf7\u6c42\u88ab\u4e22\u5f03\u6216\u8f6c\u53d1\u5230\u961f\u5217\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5206\u5e03\u5f0f\u9650\u6d41"}),"\n",(0,s.jsx)(e.p,{children:"redis:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"lua\u811a\u672c"}),"\n",(0,s.jsxs)(e.li,{children:["sorted set\u6bcf\u4e2a\u7528\u6237\u6709\u4e00\u4e2a\u81ea\u5df1\u7684set,\u8bd5\u56fe\u6267\u884c\u52a8\u4f5c\u65f6,\u4f7f\u7528MULTI\u539f\u5b50\u5730\u6267\u884c\u4e0b\u5217\u64cd\u4f5c: ",(0,s.jsx)(e.code,{children:"ZREMRANGEBYSCORE"})," \u5220\u9664\u7ed9\u5b9a\u65f6\u95f4\u95f4\u9694\u524d\u7684\u5143\u7d20, ZADD \u6dfb\u52a0\u5f53\u524d\u65f6\u95f4\u6233, ttl\u8bbe\u7f6e\u4e3arate limit,\u8ba1\u7b97sorted set\u7684\u6570\u91cf,\u5982\u679c\u8d85\u8fc7\u9650\u989d,\u5c31\u5931\u8d25 (\u6ed1\u52a8\u7a97\u53e3\u65e5\u5fd7)(\u6709\u4e00\u8bf4\u4e00\u6211\u89c9\u5f97\u8fd9\u4e2a\u5982\u679c\u6ca1\u6709\u7cbe\u786e\u7684\u9700\u6c42\u4e0d\u5982\u6ed1\u52a8\u7a97\u53e3\u8ba1\u6570\u5668, \u5f00\u9500\u611f\u89c9\u6709\u70b9\u5927)"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u591a\u9650\u6d41\u5668\u540c\u6b65: \u7528\u6237hash redis\u96c6\u7fa4\u5206\u914d\u4e4b\u7c7b, \u5c3d\u91cf\u522b\u505a\u8fd9\u79cd\u4e8b\u60c5"}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u4ed6\u5c42\u7ea7\u7684\u9650\u6d41:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"iptables"}),"\n",(0,s.jsx)(e.li,{children:"..."}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u4e00\u81f4\u6027hash",children:"\u4e00\u81f4\u6027hash"}),"\n",(0,s.jsx)(e.p,{children:"\u57fa\u672c\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528\u5747\u5300\u5206\u5e03\u7684\u54c8\u5e0c\u51fd\u6570\u5c06\u670d\u52a1\u5668\u548c\u952e\u6620\u5c04\u5230\u73af\u4e0a\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u8981\u60f3\u77e5\u9053\u4e00\u4e2a\u952e\u88ab\u6620\u5c04\u5230\u54ea\u4e2a\u670d\u52a1\u5668\uff0c\u4ece\u952e\u7684\u4f4d\u7f6e\u987a\u65f6\u9488\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u73af\u4e0a\u7684\u7b2c\u4e00\u4e2a\u670d\u52a1\u5668\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6b65\u9aa4\u662f\u5f88\u7b80\u5355\u7684, \u9ebb\u70e6\u7684\u662f\u95ee\u9898"}),"\n",(0,s.jsx)(e.p,{children:"\u73af\u4e0a\u670d\u52a1\u5668\u5206\u533a\u5927\u5c0f\u96be\u4ee5\u4fdd\u8bc1\u76f8\u540c(\u6dfb\u52a0\u5220\u9664\u670d\u52a1\u5668)"}),"\n",(0,s.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5: \u865a\u62df\u8282\u70b9(\u5206\u6210\u66f4\u5c0f\u7684\u5757)"}),"\n",(0,s.jsx)(e.p,{children:"\u6bcf\u4e2a\u670d\u52a1\u5668\u52a8\u6001\u5730\u5206\u914d\u5c0f\u5757(\u865a\u62df\u8282\u70b9), \u8fd9\u6837\u8fd8\u53ef\u4ee5\u8003\u8651\u670d\u52a1\u5668\u5bb9\u91cf\u81ea\u52a8\u7f29\u653e\u95ee\u9898"}),"\n",(0,s.jsx)(e.h3,{id:"\u4e00\u81f4\u6027\u6a21\u578b",children:"\u4e00\u81f4\u6027\u6a21\u578b"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"N = \u526f\u672c\u6570"}),"\n",(0,s.jsx)(e.p,{children:"W = \u5927\u5c0f\u4e3a W \u7684\u89c4\u5b9a\u5199\u5165\u3002\u8981\u5c06\u5199\u5165\u64cd\u4f5c\u89c6\u4e3a\u6210\u529f\uff0c\u5fc5\u987b\u4ece W \u4e2a\u526f\u672c\u786e\u8ba4\u5199\u5165\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(e.p,{children:"R = \u5927\u5c0f\u4e3a R \u7684\u8bfb\u53d6\u89c4\u5b9a\u4eba\u6570\u3002\u4e3a\u4e86\u4f7f\u8bfb\u53d6\u64cd\u4f5c\u88ab\u8ba4\u4e3a\u662f\u6210\u529f\u7684\uff0c\u8bfb\u53d6\u64cd\u4f5c\u5fc5\u987b\u7b49\u5f85\u81f3\u5c11R\u4e2a\u526f\u672c\u7684\u54cd\u5e94\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u4f55\u914d\u7f6eN\u3001W\u548cR\u4ee5\u9002\u5e94\u6211\u4eec\u7684\u4f7f\u7528\u60c5\u51b5\uff1f"}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e9b\u53ef\u80fd\u7684\u8bbe\u7f6e\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c",(0,s.jsx)(e.code,{children:"R=1\uff0cW=N"}),"\uff0c\u7cfb\u7edf\u88ab\u4f18\u5316\u4e3a\u5feb\u901f\u8bfb\u53d6"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c",(0,s.jsx)(e.code,{children:"W=1\uff0cR=N"}),"\uff0c\u7cfb\u7edf\u88ab\u4f18\u5316\u4e3a\u5feb\u901f\u5199\u5165"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c",(0,s.jsx)(e.code,{children:"W+R>N"}),"\uff0c\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027\uff08\u901a\u5e38",(0,s.jsx)(e.code,{children:"N=3\uff0cW=R=2"}),"\uff09\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5982\u679c",(0,s.jsx)(e.code,{children:"W+R<=N"}),"\uff0c\u5219\u4e0d\u80fd\u4fdd\u8bc1\u5f3a\u4e00\u81f4\u6027"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u590d\u5236",(0,s.jsx)(e.code,{children:"->"}),"\u9ad8\u53ef\u7528",(0,s.jsx)(e.code,{children:"->"}),"\u4e0d\u4e00\u81f4"]}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u73b0\u5e76\u89e3\u51b3\u51b2\u7a81: \u5e38\u7528\u662f\u5411\u91cf\u65f6\u949f vector clock, \u4f46\u6709\u51e0\u4e2a\u95ee\u9898"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5904\u7406\u51b2\u7a81\u903b\u8f91\u590d\u6742"}),"\n",(0,s.jsx)(e.li,{children:"\u52a8\u6001\u589e\u52a0\u5220\u9664\u670d\u52a1\u5668\u903b\u8f91\u590d\u6742"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u53c2\u8003:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://juejin.cn/post/7205101745936203837",children:"https://juejin.cn/post/7205101745936203837"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://houbb.github.io/2018/08/31/lock-vector-clock-01",children:"https://houbb.github.io/2018/08/31/lock-vector-clock-01"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5b9e\u9645\u4e1a\u754c\u7684\u7528\u4f8b\u53c2\u8003Dynamo"}),"\n",(0,s.jsx)(e.p,{children:"\u7b97\u6cd5\u7b80\u4ecb:\u5728\u6bcf\u4e2a\u670d\u52a1\u5668\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a\u6240\u6709\u670d\u52a1\u5668\u7684vector"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u5f53\u81ea\u5df1\u53d1\u751f\u4e8b\u4ef6\u65f6,\u589e\u52a0",(0,s.jsx)(e.code,{children:"vector[self]"}),", \u5e76\u544a\u8bc9\u9700\u8981\u544a\u8bc9\u7684\u670d\u52a1\u5668(",(0,s.jsx)(e.strong,{children:"\u6838\u5fc3\u5c31\u5728\u4e8e\u4e0d\u5e7f\u64ad, \u6ca1\u6709\u5168\u5c40\u65f6\u95f4!\u5f53\u7136\u4e5f\u56e0\u6b64\u4e0d\u4fdd\u8bc1\u89e3\u51b3\u51b2\u7a81"}),")"]}),"\n",(0,s.jsxs)(e.li,{children:["\u5f53\u81ea\u5df1\u6536\u5230A server\u7684\u4e8b\u4ef6\u65f6, ",(0,s.jsx)(e.code,{children:"vector[A] += d"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6700\u540e\u60f3\u8981\u89c9\u5f97\u4e00\u4e2a\u4e8b\u4ef6\u7684\u5168\u5c40\u987a\u5e8f\u7684\u65f6\u5019, \u67e5\u770b\u6240\u6709\u7684server\u7684vec"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u6709\u4e00\u4e2aserver\u7684vec\u662f\u6700\u5927\u7684,\u90a3\u4e48\u4e25\u683c\u6709\u56e0\u679c\u5173\u7cfb,\u53d6\u5b83\u7684\u503c\u5c31\u884c"}),"\n",(0,s.jsx)(e.p,{children:"\u4f46\u5982\u679c\u6ca1\u6709\u6700\u5927\u7684vec, \u5c31\u9700\u8981\u89e3\u51b3\u51b2\u7a81\u7684\u7b56\u7565"}),"\n",(0,s.jsx)(e.p,{children:"\u7b56\u7565"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u4ea4\u7ed9\u5ba2\u6237\u7aef, \u5982dynamo"}),"\n",(0,s.jsxs)(e.li,{children:["\u52a0\u4e0a\u65f6\u95f4\u6233, ",(0,s.jsx)(e.code,{children:"vec' = [...servers, timestamp]"}),"\u51b2\u7a81\u53d6ts\u6700\u5927\u7684"]}),"\n",(0,s.jsx)(e.li,{children:"\u968f\u673a\u53d6\u4e00\u4e2a"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u6240\u4ee5\u5411\u91cf\u65f6\u949f\u7b97\u6cd5\u7684\u5b9e\u8d28\u662f\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\uff081\uff09\u5c06\u903b\u8f91\u4e0a\u53ef\u4ee5\u5408\u5e76\u7684\u51b2\u7a81\u6210\u529f\u5408\u5e76\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff082\uff09\u903b\u8f91\u4e0a\u65e0\u6cd5\u5408\u5e76\u7684\u51b2\u7a81\u4f9d\u65e7\u51b2\u7a81\uff1b"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u62d3\u5c55: \u5411\u91cf\u65f6\u949f\u7684\u526a\u679d, riak, \u727a\u7272\u7edd\u5bf9\u7684\u6b63\u786e\u6027(false merge)\u6765\u6362\u53d6\u5bf9\u592a\u957f\u7684vec clock\u7684\u526a\u679d"}),"\n",(0,s.jsx)(e.p,{children:"gossip \u534f\u8bae quorom"}),"\n",(0,s.jsx)(e.h3,{id:"\u552f\u4e00id\u751f\u6210\u5668",children:"\u552f\u4e00ID\u751f\u6210\u5668"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u591a\u4e3b\u590d\u5236: \u4e0b\u4e00\u4e2aid += k, k\u662f\u670d\u52a1\u5668\u6570\u91cf,\u62d3\u5c55\u6027\u5dee"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"uuid"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:'\u5f15\u81ea\u7ef4\u57fa\u767e\u79d1\uff0c"\u5728\u6bcf\u79d2\u4ea7\u751f10\u4ebf\u4e2aUUIDs\uff0c\u5927\u7ea6100\u5e74\u540e\uff0c\u521b\u9020\u4e00\u4e2a\u91cd\u590d\u7684\u6982\u7387\u4f1a\u8fbe\u523050%"\u3002'}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u4f18\u70b9\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u751f\u6210 UUID \u5f88\u7b80\u5355\u3002\u670d\u52a1\u5668\u4e4b\u95f4\u4e0d\u9700\u8981\u534f\u8c03\uff0c\u56e0\u6b64\u4e0d\u4f1a\u6709\u4efb\u4f55\u540c\u6b65\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8be5\u7cfb\u7edf\u6613\u4e8e\u6269\u5c55\uff0c\u56e0\u4e3a\u6bcf\u4e2a Web \u670d\u52a1\u5668\u8d1f\u8d23\u751f\u6210\u5b83\u4eec\u4f7f\u7528\u7684 ID\u3002 ID \u751f\u6210\u5668\u53ef\u4ee5\u8f7b\u677e\u5730\u4e0e Web \u670d\u52a1\u5668\u4e00\u8d77\u6269\u5c55\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7f3a\u70b9\uff1a"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ID \u662f 128 \u4f4d\u957f, \u7a7a\u95f4\u5f00\u9500\u3002"}),"\n",(0,s.jsx)(e.li,{children:"ID \u4e0d\u4f1a\u968f\u65f6\u95f4\u4e0a\u5347"}),"\n",(0,s.jsx)(e.li,{children:"ID \u53ef\u4ee5\u662f\u975e\u6570\u5b57\u7684"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"ticket\u670d\u52a1\u5668, \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e4b\u4e2d\u7ef4\u6301\u4e00\u4e2a\u552f\u4e00\u7684ticket server\u7528\u4e8e\u7b7e\u53d1id"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"**\u4f18\u70b9\uff1a**\u6570\u5b57 ID\uff0c\u6613\u4e8e\u5b9e\u65bd\uff0c\u9002\u7528\u4e8e\u4e2d\u5c0f\u578b\u5e94\u7528\u7a0b\u5e8f"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"**\u7f3a\u70b9\uff1a**\u5355\u70b9\u6545\u969c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"twitter\u96ea\u82b1\u7b97\u6cd5"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u7b26\u53f7\u4f4d"}),"\uff1a1 \u4f4d\uff0c\u5b83\u5c06\u59cb\u7ec8\u4e3a 0\u3002\u8fd9\u662f\u4e3a\u5c06\u6765\u4f7f\u7528\u4fdd\u7559\u7684\u3002\u5b83\u53ef\u4ee5\u6f5c\u5728\u5730\u7528\u4e8e\u533a\u5206\u6709\u7b26\u53f7\u6570\u548c\u65e0\u7b26\u53f7\u6570\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u65f6\u95f4\u6233"}),"\uff1a41 \u4f4d\u3002\u81ea\u7eaa\u5143\u6216\u81ea\u5b9a\u4e49\u7eaa\u5143\u4ee5\u6765\u7684\u6beb\u79d2\u6570\u3002\u6211\u4eec\u4f7f\u7528 Twitter \u96ea\u82b1\u9ed8\u8ba4\u7eaa\u5143 1288834974657\uff0c\u76f8\u5f53\u4e8e 2010 \u5e74 11 \u6708 4 \u65e5 01:42:54 UTC\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u6570\u636e\u4e2d\u5fc3 ID"}),"\uff1a5 \u4f4d\uff0c\u8fd9\u7ed9\u4e86\u6211\u4eec 25=3225=32 \u4e2a\u6570\u636e\u4e2d\u5fc3\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u673a\u5668 ID"}),"\uff1a5 \u4f4d\uff0c\u6bcf\u4e2a\u6570\u636e\u4e2d\u5fc3\u6709 25=3225=32 \u53f0\u673a\u5668"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u5e8f\u5217\u53f7\uff1a12 \u4f4d"}),"\u3002",(0,s.jsx)(e.strong,{children:"\u5bf9\u4e8e\u5728\u8be5\u673a\u5668/\u8fdb\u7a0b\u4e0a\u751f\u6210\u7684\u6bcf\u4e2a ID\uff0c\u5e8f\u5217\u53f7\u90fd\u4f1a\u9012\u589e 1\u3002\u8be5\u6570\u5b57\u6bcf\u6beb\u79d2\u91cd\u7f6e\u4e3a 0\u3002"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e5f\u5c31\u662f\u8bf4\u96ea\u82b1\u5728\u4e00\u53f0\u673a\u5668\u4e0a1\u6beb\u79d2\u53ef\u4ee5\u652f\u63014096\u4e2a\u65b0id"}),"\n",(0,s.jsx)(e.p,{children:"\u989d\u5916\u8981\u70b9:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u65f6\u949f\u540c\u6b65\u3002\u5728\u6211\u4eec\u7684\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u5047\u8bbe ID \u751f\u6210\u670d\u52a1\u5668\u5177\u6709\u76f8\u540c\u7684\u65f6\u949f\u3002\u5f53\u670d\u52a1\u5668\u5728\u591a\u4e2a\u5185\u6838\u4e0a\u8fd0\u884c\u65f6\uff0c\u6b64\u5047\u8bbe\u53ef\u80fd\u4e0d\u6210\u7acb\u3002\u540c\u6837\u7684\u6311\u6218\u5b58\u5728\u4e8e\u591a\u673a\u573a\u666f\u4e2d\u3002\u65f6\u949f\u540c\u6b65\u7684\u89e3\u51b3\u65b9\u6848\u8d85\u51fa\u4e86\u672c\u4e66\u7684\u8303\u56f4\uff1b\u4f46\u662f\uff0c\u4e86\u89e3\u95ee\u9898\u7684\u5b58\u5728\u5f88\u91cd\u8981\u3002",(0,s.jsx)(e.strong,{children:"\u7f51\u7edc\u65f6\u95f4\u534f\u8bae\u662f\u8fd9\u4e2a\u95ee\u9898\u6700\u6d41\u884c\u7684\u89e3\u51b3\u65b9\u6848\u3002"})]}),"\n",(0,s.jsx)(e.li,{children:"\u8282\u6bb5\u957f\u5ea6\u8c03\u6574\u3002\u4f8b\u5982\uff0c\u8f83\u5c11\u7684\u5e8f\u5217\u53f7\u4f46\u8f83\u591a\u7684\u65f6\u95f4\u6233\u4f4d\u5bf9\u4f4e\u5e76\u53d1\u6027\u548c\u957f\u671f\u5e94\u7528\u662f\u6709\u6548\u7684\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u9ad8\u53ef\u7528\u6027\u3002\u7531\u4e8e ID \u751f\u6210\u5668\u662f\u5173\u952e\u4efb\u52a1\u7cfb\u7edf\uff0c\u56e0\u6b64\u5b83\u5fc5\u987b\u5177\u6709\u9ad8\u53ef\u7528\u6027"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u62d3\u5c55\u9605\u8bfb: \u7f51\u7edc\u65f6\u95f4\u534f\u8bae"}),"\n",(0,s.jsx)(e.h3,{id:"\u77edurl",children:"\u77edURL"}),"\n",(0,s.jsx)(e.p,{children:"\u70b9\u51fb\u8f83\u77ed\u7684\u522b\u540d\u91cd\u5b9a\u5411\u5230\u539f\u59cburl"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"URL\u7f29\u77ed\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u957f\u7684URL => \u8fd4\u56de\u4e00\u4e2a\u77ed\u5f97\u591a\u7684URL"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"URL\u91cd\u5b9a\u5411\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u77ed\u7684URL => \u91cd\u5b9a\u5411\u5230\u539f\u6765\u7684URL"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9ad8\u53ef\u7528\u6027\u3001\u53ef\u6269\u5c55\u6027\u548c\u5bb9\u9519\u8003\u8651"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u503c\u5f97\u5728\u8fd9\u91cc\u8ba8\u8bba\u7684\u4e00\u4ef6\u4e8b\u662f 301 \u91cd\u5b9a\u5411\u4e0e 302 \u91cd\u5b9a\u5411\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"301\u91cd\u5b9a\u5411"}),'\u3002301\u91cd\u5b9a\u5411\u8868\u660e\uff0c\u8bf7\u6c42\u7684URL\u88ab "\u6c38\u4e45 "\u5730\u79fb\u5230\u4e86\u957fURL\u4e0a\u3002\u7531\u4e8e\u662f\u6c38\u4e45\u91cd\u5b9a\u5411\uff0c',(0,s.jsx)(e.strong,{children:"\u6d4f\u89c8\u5668\u4f1a\u7f13\u5b58\u54cd\u5e94\uff0c\u5bf9\u540c\u4e00URL\u7684\u540e\u7eed\u8bf7\u6c42\u5c06\u4e0d\u4f1a\u88ab\u53d1\u9001\u5230URL\u7f29\u77ed\u670d\u52a1\u4e0a"}),"\u3002\u76f8\u53cd\uff0c\u8bf7\u6c42\u5c06\u76f4\u63a5\u88ab\u91cd\u5b9a\u5411\u5230\u957f\u7f51\u5740\u670d\u52a1\u5668\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"302\u91cd\u5b9a\u5411"}),'\u3002302\u91cd\u5b9a\u5411\u610f\u5473\u7740URL\u88ab "\u6682\u65f6 "\u79fb\u5230\u957fURL\u4e0a\uff0c\u8fd9\u610f\u5473\u7740\u5bf9\u540c\u4e00URL\u7684\u540e\u7eed\u8bf7\u6c42\u5c06\u9996\u5148\u88ab\u53d1\u9001\u5230URL\u7f29\u77ed\u670d\u52a1\u4e0a\u3002\u7136\u540e\uff0c\u5b83\u4eec\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230\u957f\u7f51\u5740\u670d\u52a1\u5668\u3002']}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u6bcf\u79cd\u91cd\u5b9a\u5411\u65b9\u6cd5\u90fd\u6709\u5176\u4f18\u70b9\u548c\u7f3a\u70b9\u3002\u5982\u679c\u4f18\u5148\u8003\u8651",(0,s.jsx)(e.strong,{children:"\u51cf\u5c11\u670d\u52a1\u5668\u8d1f\u8f7d"}),"\uff0c\u4f7f\u7528301\u91cd\u5b9a\u5411\u662f\u6709\u610f\u4e49\u7684\uff0c\u56e0\u4e3a\u53ea\u6709\u540c\u4e00URL\u7684\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u88ab\u53d1\u9001\u5230URL\u7f29\u77ed\u670d\u52a1\u5668\u3002\u7136\u800c\uff0c\u5982\u679c\u5206\u6790\u662f\u91cd\u8981\u7684\uff0c302\u91cd\u5b9a\u5411\u662f\u4e00\u4e2a\u66f4\u597d\u7684\u9009\u62e9\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u66f4\u5bb9\u6613\u5730",(0,s.jsx)(e.strong,{children:"\u8ddf\u8e2a\u70b9\u51fb\u7387\u548c\u70b9\u51fb\u7684\u6765\u6e90\u3002"})]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4e00\u4e2a\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848 ",(0,s.jsx)(e.code,{children:"<shortURL, LongURL>"}),"\u7684rdbms"]}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe\u7cfb\u7edf\u652f\u63013650\u4ebf\u4e2aurl=10\u5e74 * \u6bcf\u59291\u4ebf"}),"\n",(0,s.jsxs)(e.p,{children:["\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.code,{children:"0-9a-zA-Z"}),"62\u4e2a\u5b57\u7b26\uff0c ",(0,s.jsx)(e.code,{children:"62^n > 3650 \u4ebf"})," n = 7"]}),"\n",(0,s.jsx)(e.p,{children:"\u65b9\u6cd51: hash+\u78b0\u649e\u89e3\u51b3"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"longURL -> hash -> short -> exist on db?(opt bloomfilter + query) -> save/return/collision\n\ncollision \u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6cd5\u662f longURL -> longURL + predefined string\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u65b9\u6cd52: base62\u8f6c\u6362"}),"\n",(0,s.jsx)(e.p,{children:"\u7ed9\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u7684\u957furl\u5206\u914d\u4e00\u4e2a\u6570\u5b57\u7c7b\u578b\u7684\u552f\u4e00id, \u518d\u5bf9\u552f\u4e00id\u505abase62\u8f6c\u6362"}),"\n",(0,s.jsx)(e.p,{children:"\u574f\u5904\u662f\u53ef\u80fd\u51fa\u73b0\u5b89\u5168\u95ee\u9898"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"longURL -> in DB ? -> yes,return short\n            |\n            -> no, generate new ID -> id to base62 -> save id, longurl, shorturl in db \n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8bfb\u591a\u4e8e\u5199, \u52a0\u7f13\u5b58"}),"\n",(0,s.jsx)(e.h3,{id:"\u722c\u866b\u7cfb\u7edf",children:"\u722c\u866b\u7cfb\u7edf"}),"\n",(0,s.jsx)(e.p,{children:"\u7b97\u6cd5\u4fa7: \u4eceurl seed\u5f00\u59cb, \u5c06link\u89c6\u4e3a\u8fb9, \u7528BFS\u53bb\u722c\u53d6\u4e0d\u540c\u7684\u7f51\u9875"}),"\n",(0,s.jsx)(e.p,{children:"\u67b6\u6784\u4fa7:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"seed url -> url frontier -> html downloader(DNS resolver) -> content parser -> content seen(\u91cd\u590d\u68c0\u6d4b\u5668, \u4f8b\u5982 hash, BF) + \u5b58\u50a8-> link extractor -> url filter -> url seen -> url storage"})}),"\n",(0,s.jsx)(e.p,{children:"\u4f18\u5148\u7ea7: \u7b80\u5355\u7684\u505a\u6cd5\u662f\u6839\u636eUrl\u5185\u5bb9\u53d8\u5316\u7684\u901f\u5ea6(\u53ef\u4ee5\u57fa\u4e8e\u5386\u53f2\u6293\u53d6\u8bb0\u5f55)\u548c\u672c\u8eab\u7684\u4ef7\u503c\uff08\u4f8b\u5982\u662f\u4e2a\u4eba\u535a\u5ba2\u8fd8\u662f\u5b98\u65b9\u7f51\u7ad9\uff09\u8bbe\u8ba1\u4e00\u4e2a\u4f18\u5148\u7ea7\u4f30\u4ef7\u51fd\u6570, \u6839\u636eurl\u533a\u5206k\u4e2a\u5de5\u4f5c\u961f\u5217, \u4fdd\u8bc1\u4e00\u4e2a\u961f\u5217\u5185\u53ea\u6709\u4e00\u4e2aurl\uff08\u7684\u591a\u4e2a\u8bf7\u6c42\uff09, \u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4f18\u5148\u7ea7"}),"\n",(0,s.jsx)(e.p,{children:"\u722c\u866b\u9700\u8981\u8003\u8651\u793c\u8c8c\u6027, DDoS"}),"\n",(0,s.jsx)(e.p,{children:"\u505a\u6cd5\u662f\u6bcf\u4e2aurl\u4f5c\u4e3a\u4e00\u4e2a\u540e\u7aef\u961f\u5217, \u5728\u4f18\u5148\u7ea7\u7684selector\u51fa\u6765\u4e4b\u540e, \u7ef4\u62a4\u4e00\u5f20(url,back queue)\u7684\u8868, \u5c06url\u653e\u5230back queue\u91cc\u9762\u53bb"}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u6bcf\u4e00\u4e2aurl(backqueue), \u7ef4\u62a4\u4e00\u4e2a\u65f6\u95f4t, \u662f\u4e0b\u4e00\u6b21\u6293\u53d6\u7684\u6700\u65e9\u65f6\u95f4(\u4f8b\u5982\u5f53\u524d\u65f6\u95f4+10\u500d\u524d\u4e00\u6b21\u83b7\u53d6\u65f6\u95f4)"}),"\n",(0,s.jsx)(e.p,{children:"\u800c\u722c\u866b\u7ebf\u7a0b\u6bcf\u6b21\u4ece\u65f6\u95f4\u7684\u6700\u5c0f\u5806\u4e4b\u4e2d\u53d6\u51fa\u5143\u7d20, (\u5982\u9700\u8981, \u7b49\u5f85\u5230t), \u7136\u540e\u722c\u53d6"}),"\n",(0,s.jsx)(e.p,{children:"html\u4e0b\u8f7d\u5668: Robots \u6392\u9664\u534f\u8bae, \u5206\u5e03\u5f0f\u6293\u53d6, \u8d85\u65f6"}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u4ed6\u95ee\u9898: \u5197\u4f59\u5185\u5bb9, \u8718\u86db\u9677\u9631, \u5783\u573e\u6570\u636e, js-\u9700\u8981\u52a8\u6001\u6e32\u67d3\u5f97\u5230\u94fe\u63a5\u548c\u5176\u4ed6\u6570\u636e"}),"\n",(0,s.jsx)(e.h3,{id:"\u901a\u77e5\u7cfb\u7edf",children:"\u901a\u77e5\u7cfb\u7edf"}),"\n",(0,s.jsx)(e.p,{children:"\u5220\u91cd, \u8ddf\u8e2a, \u9650\u901f, \u7528\u6237\u8bbe\u7f6e(\u63a5\u53d7\u54ea\u4e9b\u901a\u77e5), \u5931\u8d25\u65f6\u7684\u91cd\u8bd5\u673a\u5236, \u5b89\u5168\u6027(\u5ba2\u6237\u9a8c\u8bc1)"}),"\n",(0,s.jsx)(e.p,{children:"\u63a8\u9001\u6d41\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\u6838\u5fc3\u5728fan out\u7cfb\u7edf, \u8bfb\u6247\u51fa(\u62c9\u6a21\u5f0f)\u8fd8\u662f\u5199\u6247\u51fa(\u63a8\u6a21\u5f0f), \u70ed\u952e\u95ee\u9898\u548c\u901f\u7387\u95ee\u9898"}),"\n",(0,s.jsx)(e.p,{children:"\u6df7\u5408: \u5bf9\u5927\u591a\u6570\u7528\u6237\u4f7f\u7528\u63a8\u9001\u6a21\u5f0f\u3002\u5bf9\u4e8e\u540d\u4eba\u6216\u6709\u5f88\u591a\u670b\u53cb/\u7c89\u4e1d\u7684\u7528\u6237\uff0c\u6211\u4eec\u8ba9\u7c89\u4e1d\u6309\u9700\u63d0\u53d6\u4fe1\u606f\u5185\u5bb9\u4ee5\u907f\u514d\u7cfb\u7edf\u8fc7\u8f7d"}),"\n",(0,s.jsx)(e.p,{children:"get friend IDs: graph DB"}),"\n",(0,s.jsx)(e.p,{children:"fanout service\u5148\u4ecegraph DB\u62ff\u5230friend ids, \u518d\u4ece\u7528\u6237\u7f13\u5b58(\u7528\u6237db)\u5f97\u5230\u670b\u53cb\u76f8\u5173\u4fe1\u606f:"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u628a\u67d0\u4eba\u8c03\u6210\u9759\u97f3\uff0c\u5979\u7684\u5e16\u5b50\u5c06\u4e0d\u4f1a\u663e\u793a\u5728\u4f60\u7684\u4fe1\u606f\u6d41\u4e2d\uff0c\u5c3d\u7ba1\u4f60\u4eec\u4ecd\u7136\u662f\u670b\u53cb\u3002\u5e16\u5b50\u53ef\u80fd\u4e0d\u663e\u793a\u7684\u53e6\u4e00\u4e2a\u539f\u56e0\u662f\uff0c\u7528\u6237\u53ef\u4ee5\u6709\u9009\u62e9\u5730\u4e0e\u7279\u5b9a\u7684\u670b\u53cb\u5206\u4eab\u4fe1\u606f\u6216\u5bf9\u5176\u4ed6\u4eba\u9690\u85cf\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u628a\u66f4\u65b0\u7684\u9700\u6c42\u5305\u6210\u4efb\u52a1(\u4f8b\u5982",(0,s.jsx)(e.code,{children:"<post_id, user_id>"}),")\u4e22\u5230mq"]}),"\n",(0,s.jsx)(e.p,{children:"mq\u5165\u5e93, \u5199\u7f13\u5b58"}),"\n",(0,s.jsx)(e.p,{children:"\u7f13\u5b58\u5c42\u7ea7:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"News Feed\uff1a\u5b83\u5b58\u50a8\u4e86\u4fe1\u606f\u7684ID\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Content\uff1a\u5b83\u5b58\u50a8\u6bcf\u4e2a\u5e16\u5b50\u7684\u6570\u636e\u3002\u53d7\u6b22\u8fce\u7684\u5185\u5bb9\u88ab\u5b58\u50a8\u5728\u70ed\u7f13\u5b58\u4e2d\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Social Graph\uff1a\u5b83\u5b58\u50a8\u7528\u6237\u5173\u7cfb\u6570\u636e\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Action\uff1a\u5b83\u5b58\u50a8\u6709\u5173\u7528\u6237\u662f\u5426\u559c\u6b22\u5e16\u5b50\u3001\u56de\u590d\u5e16\u5b50\u6216\u5bf9\u5e16\u5b50\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\u7684\u4fe1\u606f\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Counters\uff1a\u5b83\u5b58\u50a8\u70b9\u8d5e\u3001\u56de\u590d\u3001\u5173\u6ce8\u8005\u3001\u5173\u6ce8\u7b49\u7684\u8ba1\u6570\u5668\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u804a\u5929\u7cfb\u7edf",children:"\u804a\u5929\u7cfb\u7edf"}),"\n",(0,s.jsx)(e.p,{children:"\u65e0\u72b6\u6001\u6709\u72b6\u6001\u5206\u79bb"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u65e0\u72b6\u6001\u7684\u670d\u52a1 http"}),"\n",(0,s.jsx)(e.p,{children:"\u65e0\u72b6\u6001\u670d\u52a1\u662f\u4f20\u7edf\u7684\u9762\u5411\u516c\u4f17\u7684\u8bf7\u6c42/\u54cd\u5e94\u670d\u52a1\uff0c\u7528\u4e8e\u7ba1\u7406\u767b\u5f55\u3001\u6ce8\u518c\u3001\u7528\u6237\u8d44\u6599\u7b49\u3002\u8fd9\u4e9b\u662f\u8bb8\u591a\u7f51\u7ad9\u548c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5e38\u89c1\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u65e0\u72b6\u6001\u670d\u52a1\u4f4d\u4e8e\u8d1f\u8f7d\u5747\u8861\u5668\u540e\u9762\uff0c\u5176\u5de5\u4f5c\u662f\u6839\u636e\u8bf7\u6c42\u8def\u5f84\u5c06\u8bf7\u6c42\u8def\u7531\u5230\u6b63\u786e\u7684\u670d\u52a1\u3002\u8fd9\u4e9b\u670d\u52a1\u53ef\u4ee5\u662f\u5355\u4f53\u7684\uff0c\u4e5f\u53ef\u4ee5\u662f\u5355\u72ec\u7684\u5fae\u670d\u52a1\u3002\u6211\u4eec\u4e0d\u9700\u8981\u81ea\u5df1\u5efa\u7acb\u8bb8\u591a\u8fd9\u6837\u7684\u65e0\u72b6\u6001\u670d\u52a1\uff0c\u56e0\u4e3a\u5e02\u573a\u4e0a\u6709\u4e00\u4e9b\u670d\u52a1\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u88ab\u96c6\u6210\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5c06\u6df1\u5165\u8ba8\u8bba\u7684\u4e00\u4e2a\u670d\u52a1\u662f\u670d\u52a1\u53d1\u73b0\u3002\u5b83\u7684\u4e3b\u8981\u5de5\u4f5c\u662f\u7ed9\u5ba2\u6237\u63d0\u4f9b\u4e00\u4e2a\u5ba2\u6237\u53ef\u4ee5\u8fde\u63a5\u5230\u7684\u804a\u5929\u670d\u52a1\u5668\u7684DNS\u4e3b\u673a\u540d\u5217\u8868\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6709\u72b6\u6001\u7684\u670d\u52a1 websocket"}),"\n",(0,s.jsx)(e.p,{children:"\u552f\u4e00\u6709\u72b6\u6001\u7684\u670d\u52a1\u662f\u804a\u5929\u670d\u52a1\u3002\u8be5\u670d\u52a1\u662f\u6709\u72b6\u6001\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5ba2\u6237\u90fd\u4e0e\u4e00\u4e2a\u804a\u5929\u670d\u52a1\u5668\u4fdd\u6301\u6301\u4e45\u7684\u7f51\u7edc\u8fde\u63a5\u3002\u5728\u8fd9\u4e2a\u670d\u52a1\u4e2d\uff0c\u53ea\u8981\u670d\u52a1\u5668\u4ecd\u7136\u53ef\u7528\uff0c\u5ba2\u6237\u901a\u5e38\u4e0d\u4f1a\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u804a\u5929\u670d\u52a1\u5668\u3002\u670d\u52a1\u53d1\u73b0\u4e0e\u804a\u5929\u670d\u52a1\u5bc6\u5207\u534f\u8c03\uff0c\u4ee5\u907f\u514d\u670d\u52a1\u5668\u8fc7\u8f7d\u3002\u6211\u4eec\u5c06\u5728\u6df1\u5165\u7814\u7a76\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u670d\u52a1\u5668\u7684\u5207\u5206:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"chat server \u7ba1\u7406\u4fe1\u606f\u7684\u6536\u53d1"}),"\n",(0,s.jsx)(e.li,{children:"presence server \u7ba1\u7406\u5728\u7ebf/\u79bb\u7ebf\u72b6\u6001"}),"\n",(0,s.jsx)(e.li,{children:"api server \u5904\u7406\u65e0\u72b6\u6001\u670d\u52a1"}),"\n",(0,s.jsx)(e.li,{children:"notification server \u63a8\u9001\u901a\u77e5"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"DB\u9009\u62e9: KV\u6570\u636e\u5e93"}),"\n",(0,s.jsxs)(e.p,{children:["\u4e3a\u4ec0\u4e48\uff1f",(0,s.jsx)(e.strong,{children:"\u804a\u5929\u6570\u636e\u7684\u8bfb\u5199\u6a21\u5f0f"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6570\u636e\u91cf\u5de8\u5927 \u9700\u8981\u6c34\u5e73\u62d3\u5c55"}),"\n",(0,s.jsx)(e.li,{children:"\u53ea\u6709\u6700\u8fd1\u7684\u804a\u5929\u8bb0\u5f55\u624d\u4f1a\u88ab\u9891\u7e41\u8bbf\u95ee"}),"\n",(0,s.jsx)(e.li,{children:"\u4f46\u201c\u6700\u8fd1\u201d\u91cc\u9762\u4e5f\u4e0d\u5b8c\u5168\u662f\u987a\u5e8f\u7684, \u5f15\u7528, \u8df3\u8f6c, \u63d0\u53ca\u7b49"}),"\n",(0,s.jsx)(e.li,{children:"\u8bfb\u5199\u6bd4\u7ea6\u4e3a1:1, \u8bfb\u5e76\u4e0d\u8fdc\u8fdc\u9ad8\u4e8e\u5199"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u6837\u7684wkld\u4e0bkv\u6bd4\u5173\u7cfb\u578b\u7684\u4f18\u52bf:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6c34\u5e73\u62d3\u5c55\u8f7b\u677e"}),"\n",(0,s.jsx)(e.li,{children:"\u5206\u5c42\u67b6\u6784\u5bf9\u70ed\u6570\u636e\u5bb9\u6613\u4f18\u5316"}),"\n",(0,s.jsx)(e.li,{children:"\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684index\u5728\u6570\u636e\u91cf\u53d8\u5927\u65f6\u6602\u8d35"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6d88\u606fID\u8bbe\u8ba1:"}),"\n",(0,s.jsx)(e.p,{children:"\u4e00\u5bf9\u4e00\u804a\u5929: \u4e3b\u952emessage id"}),"\n",(0,s.jsxs)(e.p,{children:["\u7fa4\u804a: \u590d\u5408\u4e3b\u952e ",(0,s.jsx)(e.code,{children:"{channel_id, message_id}"})]}),"\n",(0,s.jsx)(e.p,{children:"\u95ee\u9898: id\u7528\u4ec0\u4e48?"}),"\n",(0,s.jsx)(e.p,{children:"\u8981\u6c42: \u552f\u4e00\u6027 + \u53ef\u4ee5\u6309\u7167\u65f6\u95f4\u6392\u5e8f"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u81ea\u589e: \u5206\u5e03\u5f0f\u5b9e\u73b0\u56f0\u96be"}),"\n",(0,s.jsx)(e.li,{children:"\u5168\u5c40\u5e8f\u5217\u53f7\u53d1\u751f\u5668: \u5c06\u65f6\u95f4\u9879\u63d0\u524d\u5c31\u53ef\u4ee5\u6309\u7167\u65f6\u95f4\u6392\u5e8f"}),"\n",(0,s.jsx)(e.li,{children:"\u672c\u5730\u5e8f\u5217\u53f7\u751f\u6210\u5668: \u53ea\u4fdd\u8bc1\u6d88\u606f\u5728\u4e00\u4e2a\u7ec4\u5185(channel\u5185)\u552f\u4e00, \u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u53d1\u9001\u4fe1\u606f\u7684\u6d41\u7a0b"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u7528\u6237A\u5411\u804a\u5929\u670d\u52a1\u56681\u53d1\u9001\u4e86\u4e00\u6761\u804a\u5929\u4fe1\u606f\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u804a\u5929\u670d\u52a1\u56681\u4eceID\u751f\u6210\u5668\u83b7\u5f97\u4e00\u4e2a\u4fe1\u606fID\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u804a\u5929\u670d\u52a1\u56681\u5c06\u6d88\u606f\u53d1\u9001\u81f3\u6d88\u606f\u540c\u6b65\u961f\u5217\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6d88\u606f\u88ab\u50a8\u5b58\u5728\u4e00\u4e2a\u952e\u503c\u5b58\u50a8\u4e2d\u3002"}),"\n",(0,s.jsx)(e.li,{children:"a. \u5982\u679c\u7528\u6237B\u5728\u7ebf\uff0c\u4fe1\u606f\u88ab\u8f6c\u53d1\u5230\u7528\u6237B\u6240\u8fde\u63a5\u7684\u804a\u5929\u670d\u52a1\u56682\u3002"}),"\n",(0,s.jsx)(e.li,{children:"b. \u5982\u679c\u7528\u6237B\u5904\u4e8e\u79bb\u7ebf\u72b6\u6001\uff0c\u5219\u4ece\u63a8\u9001\u901a\u77e5\uff08PN\uff09\u670d\u52a1\u5668\u53d1\u9001\u63a8\u9001\u901a\u77e5\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u804a\u5929\u670d\u52a1\u56682\u5c06\u6d88\u606f\u8f6c\u53d1\u7ed9\u7528\u6237B\uff0c\u7528\u6237B\u548c\u804a\u5929\u670d\u52a1\u56682\u4e4b\u95f4\u6709\u4e00\u4e2a\u6301\u4e45\u7684WebSocket\u8fde\u63a5\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u7fa4\u7ec4\u804a\u5929:"}),"\n",(0,s.jsx)(e.p,{children:"\u7b2c\u4e00\u79cd\u65b9\u6cd5: A\u53d1\u6d88\u606f, \u5728\u6bcf\u4e00\u4e2a\u6210\u5458\u7684\u6536\u4ef6\u7bb1\u91cc\u9762\u590d\u5236\u4e00\u4e2a\u526f\u672c, \u9002\u7528\u4e8e\u7fa4\u7ec4\u4eba\u6570\u8f83\u5c11\u7684\u65f6\u5019(\u4f8b\u5982\u5fae\u4fe1\u7684500\u4eba\u7ea6\u675f); \u6bcf\u4e2a\u6536\u4ef6\u4eba\u6709\u81ea\u5df1\u7684\u6536\u4ef6\u7bb1(\u6d88\u606f\u540c\u6b65\u961f\u5217), \u6240\u4ee5\u5e76\u4e0d\u4fdd\u8bc1\u4e00\u81f4\u6027"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u7ebf\u72b6\u6001\u6307\u793a\u5668:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"naive\u7684\u505a\u6cd5: \u5efa\u7acb\u8fde\u63a5\u5c31\u5728\u7ebf, \u65ad\u5f00\u5c31\u79bb\u7ebf\u3002\u95ee\u9898\u5728\u7f51\u7edc\u6ce2\u52a8\u65f6\u5019, \u53d8\u5316\u592a\u5feb"}),"\n",(0,s.jsx)(e.li,{children:"\u66f4\u4f18\u96c5\u7684\u505a\u6cd5, \u5fc3\u8df3"}),"\n",(0,s.jsx)(e.li,{children:"\u63a8\u9001, \u7c7b\u4f3c\u5fae\u4fe1\u8fd9\u79cd\u5c0f\u7fa4(500\u4eba\u9650\u5236)\u53ef\u4ee5\u76f4\u63a5\u67e5\u8be2\u5b9e\u65f6\u7684ws\u8fde\u63a5\u3002\u5927\u7fa4\u9700\u8981\u61d2\u52a0\u8f7d"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u6269\u5c55\u804a\u5929\u5e94\u7528\u7a0b\u5e8f\u4ee5\u652f\u6301\u5a92\u4f53\u6587\u4ef6\uff0c\u5982\u7167\u7247\u548c\u89c6\u9891\u3002\u5a92\u4f53\u6587\u4ef6\u7684\u5927\u5c0f\u660e\u663e\u5927\u4e8e\u6587\u672c\u3002\u538b\u7f29\u3001\u4e91\u5b58\u50a8\u548c\u7f29\u7565\u56fe\u662f\u503c\u5f97\u8ba8\u8bba\u7684\u8bdd\u9898\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7aef\u5230\u7aef\u52a0\u5bc6\u3002Whatsapp\u652f\u6301\u4fe1\u606f\u7684\u7aef\u5230\u7aef\u52a0\u5bc6\u3002\u53ea\u6709\u53d1\u4ef6\u4eba\u548c\u6536\u4ef6\u4eba\u53ef\u4ee5\u9605\u8bfb\u4fe1\u606f\u3002\u6709\u5174\u8da3\u7684\u8bfb\u8005\u8bf7\u53c2\u8003\u53c2\u8003\u8d44\u6599\u4e2d\u7684\u6587\u7ae0[9]\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u5728\u5ba2\u6237\u7aef\u7f13\u5b58\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u63d0\u9ad8\u52a0\u8f7d\u65f6\u95f4\u3002Slack\u5efa\u7acb\u4e86\u4e00\u4e2a\u5730\u7406\u5206\u5e03\u7684\u7f51\u7edc\u6765\u7f13\u5b58\u7528\u6237\u7684\u6570\u636e\u3001\u9891\u9053\u7b49\uff0c\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u52a0\u8f7d\u65f6\u95f4[10]\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u6545\u969c\u5904\u7406\u3002","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u804a\u5929\u670d\u52a1\u5668\u9519\u8bef\u3002\u53ef\u80fd\u6709\u6570\u5341\u4e07\uff0c\u751a\u81f3\u66f4\u591a\u7684\uff0c\u575a\u6301\u4e0d\u61c8\u7684\u8fde\u63a5\u5230\u4e00\u4e2a\u804a\u5929\u670d\u52a1\u5668\u3002\u5982\u679c\u4e00\u4e2a\u804a\u5929\u670d\u52a1\u5668\u79bb\u7ebf\uff0c\u670d\u52a1\u53d1\u73b0\uff08Zookeeper\uff09\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684\u804a\u5929\u670d\u52a1\u5668\uff0c\u8ba9\u5ba2\u6237\u5efa\u7acb\u65b0\u7684\u8fde\u63a5\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u6d88\u606f\u91cd\u53d1\u673a\u5236\u3002\u91cd\u8bd5\u548c\u6392\u961f\u662f\u91cd\u53d1\u6d88\u606f\u7684\u5e38\u7528\u6280\u672f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u591a\u5a92\u4f53\u652f\u6301\u7684\u5927\u4f53\u6d41\u7a0b"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"client \u901a\u8fc7 rest \u5c06\u591a\u5a92\u4f53\u8d44\u6e90\u53d1\u9001\u5230\u670d\u52a1\u5668"}),"\n",(0,s.jsx)(e.li,{children:"\u670d\u52a1\u5668\u8f6c\u6362\u5a92\u4f53\u6587\u4ef6(\u4f8b\u5982\u56fe\u7247\u751f\u6210\u7f29\u7565\u56fe, \u538b\u7f29)"}),"\n",(0,s.jsx)(e.li,{children:"\u670d\u52a1\u5668\u5b58\u5230s3"}),"\n",(0,s.jsx)(e.li,{children:"\u670d\u52a1\u5668\u901a\u8fc7s3\u94fe\u63a5\u54cd\u5e94client"}),"\n",(0,s.jsx)(e.li,{children:"\u5ba2\u6237\u7aef\u518d\u5c06s3\u94fe\u63a5\u901a\u8fc7ws\u53d1\u9001(\u5e7f\u64ad)\u7ed9\u804a\u5929\u7684\u5176\u4ed6\u7528\u6237"}),"\n",(0,s.jsx)(e.li,{children:"\u5176\u4ed6client \u6536\u5230s3\u8fde\u63a5, \u6839\u636e\u5b9a\u4e49\u7684\u6d88\u606f\u7c7b\u578b\u8fdb\u884c\u6e32\u67d3"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7b80\u5355\u7684\u641c\u7d22\u652f\u6301-trie",children:"\u7b80\u5355\u7684\u641c\u7d22\u652f\u6301: trie"}),"\n",(0,s.jsx)(e.p,{children:"topK: \u5148\u627e\u5230\u524d\u7f00, \u518d\u904d\u5386\u5b50\u6811"}),"\n",(0,s.jsx)(e.p,{children:"\u95ee\u9898: \u592a\u6162"}),"\n",(0,s.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728\u6bcf\u4e2a\u8282\u70b9\u7f13\u5b58\u5e38\u7528\u7684\u524dk\u4e2a\u67e5\u8be2"}),"\n",(0,s.jsx)(e.li,{children:"\u63a7\u5236\u524d\u7f00\u7684\u6700\u5927\u957f\u5ea6"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u66f4\u65b0trie: \u6570\u636e\u641c\u96c6, \u5bf9\u4e8e\u5b9e\u65f6\u5e94\u7528\u670d\u52a1, \u77ed\u65f6\u95f4\u95f4\u9694; \u5bf9\u4e8e\u975e\u5b9e\u65f6\u7684, \u53ef\u4ee5\u4f8b\u5982\u4e00\u5468\u5b9a\u65f6\u66f4\u65b0\u4e00\u6b21"}),"\n",(0,s.jsx)(e.p,{children:"\u5408\u6cd5\u6027: \u81ea\u52a8\u5b8c\u6210\u53ef\u4ee5\u6839\u636ehash\u7b49\u8fc7\u4e00\u4e2afilter, \u907f\u514d\u8865\u51fa\u7981\u6b62\u7684\u7f51\u7ad9\u7b49"}),"\n",(0,s.jsx)(e.p,{children:"\u591a\u8bed\u8a00\uff1aunicode trie"}),"\n",(0,s.jsx)(e.p,{children:"\u5206\u7247: \u53ef\u4ee5\u57fa\u4e8e\u5b57\u6bcd, \u4f46\u662f\u8981\u8003\u8651\u5230\u9891\u7387\u95ee\u9898"}),"\n",(0,s.jsx)(e.p,{children:"\u5b9e\u65f6(\u8d8b\u52bf)\u641c\u7d22: \u6d41\u5f0f, \u9886\u57df\u7279\u5b9a, AI"}),"\n",(0,s.jsx)(e.p,{children:"\u89c6\u9891\u6d41"}),"\n",(0,s.jsx)(e.p,{children:"\u6838\u5fc3\u662f\u5206\u6210\u51e0\u4e2a\u90e8\u5206, \u4e00\u90e8\u5206\u7c7b\u4f3c\u4f20\u7edf\u7684server, \u63d0\u4f9b\u89c6\u9891metadata"}),"\n",(0,s.jsx)(e.p,{children:"\u53e6\u4e00\u90e8\u5206\u4f9d\u6258\u4e91\u670d\u52a1\u548cCDN, \u505a\u597d\u89c6\u9891\u4f20\u8f93\u548c\u89e3\u7801\u7f16\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u4e2d\u7279\u5b9a\u90e8\u5206\u7684\u903b\u8f91\u590d\u6742, \u4f8b\u5982\u89e3\u7f16\u7801\u7684\u6a21\u5757\u5316\u548c\u5f15\u64ce\u5316, CDN\u8d35\u6240\u4ee5\u89c6\u9891\u57fa\u4e8e\u5386\u53f2\u6570\u636e\u505a\u51b7\u70ed\u5206\u79bb, \u51b7\u89c6\u9891\u8d70\u81ea\u5efa\u800c\u4e0d\u662fCDN"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd8\u6709\u6bd4\u5982\u9519\u8bef\u5904\u7406, \u6570\u5b57\u7248\u6743\u4e4b\u7c7b"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://learning-guide.gitbook.io/system-design-interview/xi-tong-she-ji-mian-shi-nei-mu-zhi-nan-di-yi-juan/chapter-14-design-youtube",children:"\u5177\u4f53\u597d\u591a\u7ec6\u8282"})}),"\n",(0,s.jsx)(e.h3,{id:"\u4e34\u8fd1\u670d\u52a1",children:"\u4e34\u8fd1\u670d\u52a1"}),"\n",(0,s.jsx)(e.p,{children:"\u7531\u4e8e\u662f\u8bfb\u8fdc\u591a\u4e8e\u5199\u7684\u60c5\u51b5, \u6240\u4ee5\u5e38\u89c1\u7528\u5173\u7cfb\u578bdb"}),"\n",(0,s.jsx)(e.p,{children:"\u5173\u7cfb\u578b\u7684\u95ee\u9898\u662f, \u5982\u679c\u662f\u7ecf\u7eac\u5ea6, \u4e8c\u7ef4\u6570\u636eindex\u5229\u7528\u7387\u4f4e"}),"\n",(0,s.jsx)(e.p,{children:"\u89e3\u51b3\u65b9\u6cd5\u662f\u4e8c\u7ef4\u8f6c\u4e00\u7ef4\u518dindex\u641c\u7d22, \u4f8b\u5982geohash, R tree, \u56db\u53c9\u6811, google s2"}),"\n",(0,s.jsx)(e.p,{children:"geohash: \u7ecf\u7eac\u5ea6\u7f51\u683c\u7f16\u7801\u518d\u8f6cbase32, \u5171\u4eab\u524d\u7f00\u8d8a\u957f, \u8d8a\u63a5\u8fd1"}),"\n",(0,s.jsxs)(e.p,{children:["\u8fb9\u754c\u95ee\u9898: \u53cd\u8fc7\u6765\u4e0d\u6210\u7acb, \u63a5\u8fd1\u7684\u4e24\u4e2a\u5730\u5757\u53ef\u80fd\u5171\u4eab\u524d\u7f00\u5e76\u4e0d\u957f(\u5728\u5b50\u5348\u7ebf/\u8d64\u9053\u7b49\u5927\u683c\u5b50\u8fb9\u754c), \u6240\u4ee5",(0,s.jsx)(e.code,{children:"geohash LIKE 'sth%'"}),"\u68c0\u7d22\u51fa\u6765\u7ed3\u679c\u4e0d\u5168"]}),"\n",(0,s.jsx)(e.p,{children:"\u65b9\u6cd5\u662f\u4e0d\u4ec5\u68c0\u7d22\u81ea\u5df1\u683c\u5b50\u7684geohash, \u4e5f\u628a\u90bb\u5c45\u683c\u5b50\u7684\u4e00\u8d77\u68c0\u7d22"}),"\n",(0,s.jsx)(e.p,{children:"\u4e1a\u52a1\u95ee\u9898\uff1a\u8303\u56f4\u5185\u90e8\u5546\u5bb6\u4e0d\u591f, \u89e3\u51b3\u65b9\u6cd5\u662f\u653e\u5927\u683c\u5b50\u7ee7\u7eed\u68c0\u7d22"}),"\n",(0,s.jsxs)(e.p,{children:["google s2: \u57fa\u4e8e\u5e0c\u5c14\u4f2f\u7279\u66f2\u7ebf\u7684",(0,s.jsx)(e.code,{children:"\u7403\u9762->1d"}),"\u7b97\u6cd5, \u4fdd\u8bc12d\u4e0a\u63a5\u8fd1\u57281d\u4e0a\u4e5f\u63a5\u8fd1"]})]})}function t(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(j,{...n})}):j(n)}},28453:(n,e,l)=>{l.d(e,{R:()=>c,x:()=>d});var s=l(96540);const i={},r=s.createContext(i);function c(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:c(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);