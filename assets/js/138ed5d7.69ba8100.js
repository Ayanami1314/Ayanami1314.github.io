"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5400],{5143:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>a});var s=t(4848),r=t(8453);const i={title:"ts\u57fa\u7840",date:new Date("2024-07-11T00:00:00.000Z"),pinned:9,author:"ayanami"},c=void 0,o={permalink:"/blog/ts\u57fa\u7840",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/ts\u57fa\u7840.md",source:"@site/blog/ts\u57fa\u7840.md",title:"ts\u57fa\u7840",description:"ts: \u5e26\u9759\u6001\u7c7b\u578b\u7684 js",date:"2024-07-11T00:00:00.000Z",tags:[],readingTime:5.585,hasTruncateMarker:!1,authors:[{name:"ayanami"}],frontMatter:{title:"ts\u57fa\u7840",date:"2024-07-11T00:00:00.000Z",pinned:9,author:"ayanami"},unlisted:!1,prevItem:{title:"linking \u590d\u4e60",permalink:"/blog/linking-\u590d\u4e60"},nextItem:{title:"\u5b9e\u62182 mosh gamehub",permalink:"/blog/\u5b9e\u62182-mosh-gamehub"}},l={authorsImageUrls:[void 0]},a=[{value:"\u914d\u7f6e ts",id:"\u914d\u7f6e-ts",level:4},{value:"debug ts",id:"debug-ts",level:4},{value:"ts \u7684\u4f18\u70b9",id:"ts-\u7684\u4f18\u70b9",level:4},{value:"ts null/undefined",id:"ts-nullundefined",level:4},{value:"\u53ef\u9009\u8fd0\u7b97\u7b26\uff1f",id:"\u53ef\u9009\u8fd0\u7b97\u7b26",level:4},{value:"type assert",id:"type-assert",level:4},{value:"OOP",id:"oop",level:4},{value:"Index signature",id:"index-signature",level:4},{value:"\u6cdb\u578b Generic \u57fa\u672c\u540c java \u6cdb\u578b",id:"\u6cdb\u578b-generic-\u57fa\u672c\u540c-java-\u6cdb\u578b",level:4},{value:"decorators",id:"decorators",level:4},{value:"module",id:"module",level:4}];function d(n){const e={blockquote:"blockquote",code:"code",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"ts: \u5e26\u9759\u6001\u7c7b\u578b\u7684 js"}),"\n",(0,s.jsx)(e.h4,{id:"\u914d\u7f6e-ts",children:"\u914d\u7f6e ts"}),"\n",(0,s.jsx)(e.p,{children:"tsc --init"}),"\n",(0,s.jsx)(e.p,{children:"tsconfig.json"}),"\n",(0,s.jsx)(e.p,{children:"\u91cd\u8981\u914d\u7f6e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'{\n\n "compilerOptions": {\n\n  "target": "es2016",   // \u6307\u5b9a\u7f16\u8bd1\u5668\n\n  "module": "commonjs",\n\n  "rootDir": "./",\n\n  ......\n\n  "outDir": "./", // \u7f16\u8bd1\u5b8c\u6210\u7684js\u6587\u4ef6\u4f4d\u7f6e\n\n  "removeComments": true,\n\n  "noEmitOnError": true,\n\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"tsc \u9ed8\u8ba4\u884c\u4e3a\u662f\u7f16\u8bd1 root \u4e0b\u9762\u7684\u6240\u6709.ts \u6587\u4ef6\uff0c\u5982\u679c\u4e0a\u9762\u6539\u4e86 tsconfig.json\uff0c\u7f16\u8bd1 rootDir"}),"\n",(0,s.jsxs)(e.p,{children:["\u53ea\u9700\u8981",(0,s.jsx)("code",{children:"tsc"}),"\u5373\u53ef"]}),"\n",(0,s.jsx)(e.h4,{id:"debug-ts",children:"debug ts"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u53d6\u6d88 tsconfig.json \u4e2d\u7684 sourceMap\uff08\u6e90\u4ee3\u7801\u6620\u5c04\uff09\u7684\u6ce8\u91ca"}),"\n",(0,s.jsxs)(e.li,{children:["\u914d\u7f6e debug \u91cc\u9762 launch.json\uff0c\u6ce8\u610f",(0,s.jsx)("code",{children:"tsc: build"}),"\u5982\u679c\u5f00\u4e86\u4e2d\u6587\u5305\u9700\u8981\u6539\u6210",(0,s.jsx)("code",{children:"tsc: \u6784\u5efa"}),"(\u9006\u5929)"]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"ts-\u7684\u4f18\u70b9",children:"ts \u7684\u4f18\u70b9"}),"\n",(0,s.jsx)(e.p,{children:"\u9650\u5b9a\u65b9\u6cd5\u4e4b\u540e\u53ef\u4ee5\u51cf\u5c11\u9519\u8bef"}),"\n",(0,s.jsx)(e.p,{children:"\u8fd8\u53ef\u4ee5\u65b9\u4fbf\u7684\u548c IntelliSense \u96c6\u6210\uff0c\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u63d0\u4f9b\u4e0d\u540c\u7684\u4ee3\u7801\u8865\u5168"}),"\n",(0,s.jsx)(e.p,{children:"\u6253\u5f00"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "target": "ES5",\n    "module": "CommonJS",\n    "outDir": "out",\n    "rootDir": "./src",\n    "sourceMap": true,\n    "noImplicitAny": true,\n    "noUnusedParameters": true,\n    "noImplicitReturns": true,\n    "noUnusedLocals": true\n  }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"ts \u652f\u6301\u5bf9\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u7684\u68c0\u67e5\uff0c\u4e5f\u652f\u6301\u9ed8\u8ba4\u503c"}),"\n",(0,s.jsx)(e.p,{children:"ts \u7684\u5bf9\u8c61"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'let s1: {\n  readonly id: number;\n  name: string;\n  enroll: (date: Date) => void;\n} = {\n  id: 1,\n  name: "Ayanami",\n  enroll: (date: Date) => {\n    console.log(date);\n  },\n};\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4f7f\u7528 tpye alias"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'let s1: student = {\n  id: 1,\n  name: "Ayanami",\n  enroll: (date: Date) => {\n    console.log(date);\n  },\n};\n\ntype student = {\n  readonly id: number;\n  name: string;\n  enroll: (date: Date) => void;\n};\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"type narrowing"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'function LogWeight(weight: number | string) {\n  if (typeof weight === "number") {\n    console.log(weight.toString() + "kg");\n  }\n  if (typeof weight === "string") {\n    console.log(weight);\n  }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"type intersection"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"type dragble = {\n  drag: () => void;\n};\ntype resizeble = {\n  resize: () => void;\n};\ntype UIwidget = dragble & resizeble;\nlet textbox: UIwidget = {\n  drag: () => {},\n  resize: () => {},\n};\n"})}),"\n",(0,s.jsx)(e.p,{children:"type \u4e5f\u53ef\u4ee5\u662f\u6307\u5b9a\u7684\u503c(literal type)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'type percent = 50 | 100;\ntype Metric = "cm" | "inch";\n'})}),"\n",(0,s.jsx)(e.h4,{id:"ts-nullundefined",children:"ts null/undefined"}),"\n",(0,s.jsx)(e.p,{children:"null \u4e0d\u80fd\u76f4\u63a5\u4f20\u9012\u7ed9\u7c7b\u4f3c string \u7c7b\u578b\u7684\u53c2\u6570, \u9700\u8981\u7528\u5230\u7684\u65f6\u5019\u8981\u7528\u4ea4\u96c6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'function f(str: string | null): void {\n  if (str) console.log(str);\n  else {\n    console.log("Null");\n  }\n}\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u53ef\u9009\u8fd0\u7b97\u7b26",children:"\u53ef\u9009\u8fd0\u7b97\u7b26\uff1f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"type user = { name: string; age: number };\ntype disgust = user | null | undefined;\nfunction handle(dis: disgust): void {\n  console.log(dis?.name); // \u53ea\u6709\u5f53dis\u4e0d\u662fnull\u548cundefined\u7684\u65f6\u5019\u624d\u4f1a\u6267\u884c.\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"type-assert",children:"type assert"}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u4e8e\u5411\u7f16\u8bd1\u5668\u8868\u660e\u201c\u6211\u6bd4\u4f60\u66f4\u61c2\u5b83\u662f\u4ec0\u4e48\u7c7b\u578b\u201d\u548c\u5f97\u5230\u5bf9\u5e94\u7c7b\u578b\u7684\u65b9\u6cd5\u8865\u5168"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'let phone = document.getElementById("phone") as HTMLInputElement;\nconsole.log(phone.value);\n'})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.p,{children:["using ",(0,s.jsx)(e.strong,{children:"'unknown'"})," type && type narrowing instead of using ",(0,s.jsx)(e.strong,{children:"'any'"})," type"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"instanceof \u7684\u4f7f\u7528"}),"\n",(0,s.jsx)(e.h4,{id:"oop",children:"OOP"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'class account {\n  readonly id: number;\n  private _balance: number;\n  name: string;\n  constructor(id: number, balance: number, name: string) {\n    this.id = id;\n    this._balance = balance;\n    this.name = name;\n  }\n  withdraw(amount: number) {\n    this._balance -= amount;\n  }\n  getBalance() {\n    return this._balance;\n  }\n}\nlet acc: account = new accout(1, 100, "Ayanami");\nacc.withdraw(10);\nconsole.log(acc instanceof account);\n\n// \u6216\u8005\nclass account {\n  constructor(\n    public readonly: number,\n    private _balance: number,\n    public name: string\n  ) {}\n  withdraw(amount: number): void {\n    this._balance -= amount;\n  }\n  getBalance(): number {\n    return this._balance;\n  }\n}\nlet acc: account = new account(1, 100, "Ayanami");\nacc.withdraw(10);\nconsole.log(acc instanceof account);\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// \u66f4\u597d\u7684getBalance\n  get balance():{\n      return this._balance;\n  }\n}\n\n// \u7136\u540e\u5916\u9762\u53ef\u4ee5\u76f4\u63a5\nlet b = acc.balance; // \u53ef\u4ee5\nacc.balancew = 2; // \u4e0d\u884c\n"})}),"\n",(0,s.jsx)(e.h4,{id:"index-signature",children:"Index signature"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'class seatsAssign {\n  [seats: string]: string;\n}\nlet s = new seatsAssign();\ns["A1"] = "Ayanami";\ns["A2"] = "Nimi Sora";\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u9759\u6001\u6210\u5458\uff1a\u7c7b\u4f3c java \u7684\u8bed\u6cd5"}),"\n",(0,s.jsx)(e.p,{children:"\u7ee7\u627f\u8bed\u6cd5 class A extends B"}),"\n",(0,s.jsx)(e.p,{children:"\u91cd\u8f7d\u8bed\u6cd5 override function()"}),"\n",(0,s.jsx)(e.p,{children:"\u62bd\u8c61\u7c7b abstract class A, \u62bd\u8c61\u65b9\u6cd5\u4e5f\u662f\u524d\u9762\u52a0 abstract"}),"\n",(0,s.jsx)(e.p,{children:"\u63a5\u53e3 interface \u57fa\u672c\u540c java \u7684\u63a5\u53e3"}),"\n",(0,s.jsx)(e.h4,{id:"\u6cdb\u578b-generic-\u57fa\u672c\u540c-java-\u6cdb\u578b",children:"\u6cdb\u578b Generic \u57fa\u672c\u540c java \u6cdb\u578b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'// \u6cdb\u578b\u793a\u4f8b\nfunction echo<T extends string | null>(value: T): T {\n  return value;\n}\necho("1");\n'})}),"\n",(0,s.jsx)(e.p,{children:"keyof \u5173\u952e\u5b57"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"class Store<T> {\n  protected _items: T[] = [];\n  constructor(items: T[]) {\n    this._items = items;\n  }\n  addItem(item: T) {\n    this._items.push(item);\n  }\n  // NOTE: if property is not present in T, it will return undefined. So use keyof T to make sure property is present in T\n  find(property: keyof T, value: unknown): T | undefined {\n    return this._items.find((item) => item[property] === value);\n  }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"type mapping"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// type readOnlyProduct = Readonly<Product>;\ntype readOnlyProduct = {\n  readonly [P in keyof Product]: Product[P];\n};\ntype ReadOnly<T> = {\n  readonly [P in keyof T]: T[P];\n};\ntype Optional<T> = {\n  [P in keyof T]?: T[P];\n};\ntype Nullable<T> = {\n  [P in keyof T]: T[P] | null;\n};\n"})}),"\n",(0,s.jsx)(e.h4,{id:"decorators",children:"decorators"}),"\n",(0,s.jsx)(e.p,{children:"\u6846\u67b6\uff1a\u5185\u7f6e decorator\uff0c\u4fee\u6539\u4e00\u4e2a\u7c7b\u7684\u5c5e\u6027"}),"\n",(0,s.jsx)(e.p,{children:"\u7c7b\u4f3c\u7c7b\u7684\u7ee7\u627f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'function decorator(constructor: Function) {\n  console.log("decorator called");\n  constructor.prototype.myID = new Date().getTime();\n  constructor.prototype.someFunction = () => {\n    console.log("someFunction called");\n  };\n}\n@decorator\nclass MyClass {}\n'})}),"\n",(0,s.jsx)(e.p,{children:"class decorator"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'type Option = {\n  selection: string;\n};\n// NOTE: decorator factory\nfunction paramDecorator(op: Option) {\n  return (constructor: Function) => {\n    console.log(`decorator with ${op.selection} called`);\n    constructor.prototype.profile = op;\n    constructor.prototype.myID = new Date().getTime();\n  };\n}\n@paramDecorator({ selection: "some string" })\nclass MyClass {}\n'})}),"\n",(0,s.jsx)(e.p,{children:"method decorator\uff1a\u4f5c\u7528\u4e00\u822c\u662f\u589e\u5f3a\u67d0\u4e2a\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'function Log(target: any, methodName: string, descriptor: PropertyDescriptor) {\n  const originalMethod = descriptor.value as Function;\n  descriptor.value = function (...args: any) {\n    console.log("Before");\n    originalMethod.call(this, ...args);\n    console.log("After");\n  };\n}\nclass Person {\n  @Log\n  say(message: string) {\n    console.log(message);\n  }\n}\nlet person = new Person();\nperson.say("Hello");\n'})}),"\n",(0,s.jsx)(e.h4,{id:"module",children:"module"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"import"})," and ",(0,s.jsx)(e.code,{children:"export"})]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"wildcard import"}),"\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:'import * as Shapes from "./shapes";\n'})}),"\n",(0,s.jsx)(e.p,{children:"use JSDoc to add basic type checking in js"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'/**\n * the description of function\n * @param {string} str - the description of str\n * @returns {void}\n */\nfunction test(str) {\n  console.log("test " + str);\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528 .d.ts \u58f0\u660e\u6587\u4ef6"})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>o});var s=t(6540);const r={},i=s.createContext(r);function c(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);